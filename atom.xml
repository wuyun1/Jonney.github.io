<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[ç‰¹é¦–çš„å‰ç«¯æ—¥å¿—]]></title>
  <subtitle><![CDATA[æˆ‘ä¸æ˜¯å¤§ç¥ï¼Œå¯æˆ‘æ˜¯è¦æˆä¸ºå¤§ç¥çš„ç”·äºº]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://yoursite.com/"/>
  <updated>2015-01-26T15:00:19.112Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name><![CDATA[ç‰¹é¦–]]></name>
    <email><![CDATA[markpopjason@gmail.com]]></email>
  </author>
  
  <generator uri="http://zespia.tw/hexo/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Swiftå­¦ä¹ ç¬”è®°]]></title>
    <link href="http://yoursite.com/2015/01/26/Swift%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2015/01/26/Swiftå­¦ä¹ ç¬”è®°/</id>
    <published>2015-01-26T14:55:23.000Z</published>
    <updated>2015-01-26T14:57:33.000Z</updated>
    <content type="html"><![CDATA[<h1 id="åŸºç¡€éƒ¨åˆ†">åŸºç¡€éƒ¨åˆ†</h1>
<h2 id="å¸¸é‡ä¸å˜é‡">å¸¸é‡ä¸å˜é‡</h2>
<ul>
<li>letï¼ˆå¸¸é‡ï¼‰</li>
<li>varï¼ˆå˜é‡ï¼‰</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> x = <span class="number">0.0</span>, y = <span class="number">0.0</span>, z = <span class="number">0.0</span> <span class="comment">// ä¸€è¡Œå£°æ˜å¤šä¸ªå˜é‡</span></div><div class="line"><span class="keyword">var</span> msg: <span class="type">String</span> <span class="comment">// æ ‡æ³¨ç±»å‹</span></div><div class="line"><span class="built_in">println</span>(<span class="string">"my name is <span class="subst">\(name)</span>"</span>) <span class="comment">// å­—ç¬¦ä¸²æ’å€¼</span></div></pre></td></tr></table></figure>

<h2 id="æ³¨é‡Š">æ³¨é‡Š</h2>
<ul>
<li>å•è¡Œæ³¨é‡Š</li>
<li>å¤šè¡Œæ³¨é‡Š</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š</span></div><div class="line"><span class="comment">/* è¿™æ˜¯ä¸€ä¸ª</span></div><div class="line">å¤šè¡Œæ³¨é‡Š */</div></pre></td></tr></table></figure>

<h2 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h2>
<ul>
<li>æ•´å‹<ul>
<li>Intï¼ˆæœ‰ç¬¦å·ï¼Œ32ä½å¹³å°ä¸ºInt32ï¼Œ64ä½å¹³å°ä¸ºInt64ï¼‰<ul>
<li>Int8</li>
<li>Int16</li>
<li>Int32</li>
<li>Int64</li>
</ul>
</li>
<li>UIntï¼ˆæ— ç¬¦å·ï¼Œ32ä½å¹³å°ä¸ºUInt32ï¼Œ64ä½å¹³å°ä¸ºUInt64ï¼‰<ul>
<li>UInt8</li>
<li>UInt16</li>
<li>UInt32</li>
<li>UInt64</li>
</ul>
</li>
</ul>
</li>
<li>æµ®ç‚¹å‹<ul>
<li>Doubleï¼ˆ64ä½ï¼Œ15ä½æ•°å­—ï¼‰</li>
<li>Floatï¼ˆ32ä½ï¼Œ6ä½æ•°å­—ï¼‰</li>
</ul>
</li>
<li>å¸ƒå°”å‹<ul>
<li>true</li>
<li>false</li>
</ul>
</li>
<li>å…ƒç»„</li>
<li>nil</li>
</ul>
<h3 id="æ•´æ•°">æ•´æ•°</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> minValue = <span class="type">UInt8</span>.<span class="built_in">min</span> <span class="comment">// minValueä¸º0</span></div><div class="line"><span class="keyword">let</span> maxValue = <span class="type">UInt8</span>.<span class="built_in">max</span> <span class="comment">// maxValueä¸º255</span></div></pre></td></tr></table></figure>

<h3 id="æµ®ç‚¹å‹">æµ®ç‚¹å‹</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> pi = <span class="number">3.14159</span> <span class="comment">// piä¼šè¢«æ¨æµ‹ä¸ºDoubleç±»å‹</span></div></pre></td></tr></table></figure>

<h3 id="å…ƒç»„">å…ƒç»„</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">let http404Error = (<span class="number">404</span>, <span class="string">"Not Found"</span>)</div><div class="line">let (statusCode, statusMessage) = http404Error</div><div class="line">println(statusCode<span class="string">") // 404</span></div><div class="line">println(statusMessage) <span class="comment">// Not Found</span></div><div class="line"><span class="comment">// åªéœ€ä¸€éƒ¨åˆ†ï¼Œç”¨ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ä»£æ›¿</span></div><div class="line">let (justTheStatusCode, _) = http404Error</div><div class="line"><span class="comment">// è®¿é—®å•ä¸ªå…ƒç´ </span></div><div class="line">println(http404Error.<span class="number">0</span>) <span class="comment">// 404</span></div><div class="line">println(http404Error.<span class="number">1</span>) <span class="comment">// Not Found</span></div><div class="line"><span class="comment">// ç»™å•ä¸ªå…ƒç´ å‘½å</span></div><div class="line">let http200Status = (statusCode: <span class="number">200</span>, description: <span class="string">"OK"</span>)</div><div class="line">println(http200Status.statusCode) <span class="comment">// 200</span></div><div class="line">println(http200Status.description) <span class="comment">// OK</span></div></pre></td></tr></table></figure>

<h3 id="æ•°å€¼å‹å­—é¢é‡">æ•°å€¼å‹å­—é¢é‡</h3>
<ul>
<li>åè¿›åˆ¶ï¼ˆæ²¡æœ‰å‰ç¼€ï¼‰</li>
<li>äºŒè¿›åˆ¶ï¼ˆ0bï¼‰</li>
<li>å…«è¿›åˆ¶ï¼ˆ0oï¼‰</li>
<li>åå…­è¿›åˆ¶ï¼ˆ0xï¼‰</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="number">1.25e2</span> <span class="comment">// è¡¨ç¤º1.25x10^2</span></div><div class="line"><span class="number">1.25e-2</span> <span class="comment">// è¡¨ç¤º1.25x10^-2</span></div><div class="line"><span class="number">0xF</span>p2 <span class="comment">// è¡¨ç¤º15x2^2</span></div><div class="line"><span class="number">0xF</span>p-<span class="number">2</span> <span class="comment">// è¡¨ç¤º15x2^-2</span></div><div class="line">lef oneMillion = <span class="number">1</span>_000_000 <span class="comment">// æ•´æ•°å’Œæµ®ç‚¹æ•°éƒ½å¯ä»¥åŠ _æ¥å¢å¼ºå¯è¯»æ€§</span></div></pre></td></tr></table></figure>

<h3 id="æ•°å€¼ç±»å‹è½¬åŒ–">æ•°å€¼ç±»å‹è½¬åŒ–</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// æ•´å‹è½¬åŒ–</div><div class="line"><span class="keyword">let</span> one: <span class="variable">UInt8 =</span> <span class="number">1</span></div><div class="line"><span class="keyword">let</span> two: <span class="variable">UInt16 =</span> UInt16(one)</div><div class="line">// æ•´å‹è½¬æµ®ç‚¹å‹</div><div class="line">lef <span class="variable">i =</span> <span class="number">3</span></div><div class="line"><span class="keyword">let</span> <span class="variable">d =</span> Double(i)</div><div class="line">// æµ®ç‚¹å‹è½¬æ•´å‹</div><div class="line"><span class="keyword">let</span> <span class="variable">pi =</span> <span class="number">3.14</span></div><div class="line"><span class="keyword">let</span> <span class="variable">three =</span> Int(pi) // æµ®ç‚¹å€¼ä¼šè¢«æˆªæ–­</div></pre></td></tr></table></figure>

<h3 id="ç±»å‹åˆ«å">ç±»å‹åˆ«å</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typealias</span> <span class="type">AudioSample</span> = <span class="type">UInt16</span></div><div class="line"><span class="keyword">var</span> <span class="built_in">min</span> = <span class="type">AudioSample</span>.<span class="built_in">min</span> <span class="comment">// minä¸º0</span></div></pre></td></tr></table></figure>

<h3 id="å¯é€‰ç±»å‹">å¯é€‰ç±»å‹</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// optionä¸ºå¯é€‰ç±»å‹</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="keyword">const</span> = option {</div><div class="line">  <span class="comment">// code</span></div><div class="line">}</div><div class="line"><span class="comment">// å¯é€‰ï¼ˆ?ï¼‰å’Œéšå¼å¯é€‰ï¼ˆ!ï¼‰çš„åŒºåˆ«</span></div><div class="line"><span class="keyword">let</span> h: <span class="built_in">String</span>? = <span class="string">"hello"</span></div><div class="line">println(h!)</div><div class="line"><span class="keyword">let</span> w: <span class="built_in">String</span>! = <span class="string">"world"</span></div><div class="line">print(w)</div></pre></td></tr></table></figure>

<h2 id="è°ƒè¯•">è°ƒè¯•</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> <span class="variable">age =</span> -<span class="number">3</span></div><div class="line"><span class="keyword">assert</span>(age &gt;= <span class="number">0</span>, <span class="string">"cannot be less than zero"</span>) // æ¡ä»¶ä¸º<span class="constant">false</span>ç¨‹åºç»ˆæ­¢</div></pre></td></tr></table></figure>

<h1 id="åŸºæœ¬è¿ç®—ç¬¦">åŸºæœ¬è¿ç®—ç¬¦</h1>
<ul>
<li>èµ‹å€¼è¿ç®—ï¼ˆ=ï¼‰</li>
<li>ç®—æ•°è¿ç®—<ul>
<li>åŠ æ³•ï¼ˆ+ï¼‰</li>
<li>å‡æ³•ï¼ˆ-ï¼‰</li>
<li>ä¹˜æ³•ï¼ˆ*ï¼‰</li>
<li>é™¤æ³•ï¼ˆ/ï¼‰</li>
<li>æ±‚ä½™ï¼ˆ%ï¼‰</li>
</ul>
</li>
<li>è‡ªå¢å’Œè‡ªå‡è¿ç®—<ul>
<li>è‡ªå¢ï¼ˆ++ï¼‰</li>
<li>è‡ªå‡ï¼ˆâ€”ï¼‰</li>
</ul>
</li>
<li>å¤åˆèµ‹å€¼ï¼ˆ+=ï¼‰</li>
<li>æ¯”è¾ƒè¿ç®—<ul>
<li>ç­‰äºï¼ˆ==ï¼‰</li>
<li>ä¸ç­‰ï¼ˆ!=ï¼‰</li>
<li>å¤§äºï¼ˆ&gt;ï¼‰</li>
<li>å°äºï¼ˆ&lt;ï¼‰</li>
<li>å¤§äºç­‰äºï¼ˆ&gt;=ï¼‰</li>
<li>å°äºç­‰äºï¼ˆ&lt;=ï¼‰</li>
</ul>
</li>
<li>ä¸‰ç›®è¿ç®—ï¼ˆbool?a:bï¼‰</li>
<li>ç©ºåˆè¿ç®—ï¼ˆa??bï¼‰</li>
<li>åŒºé—´è¿ç®—<ul>
<li>é—­åŒºé—´ï¼ˆâ€¦ï¼‰</li>
<li>åŠå¼€åŒºé—´ï¼ˆ..&lt;ï¼‰</li>
</ul>
</li>
<li>é€»è¾‘è¿ç®—<ul>
<li>é€»è¾‘éï¼ˆ!aï¼‰</li>
<li>é€»è¾‘ä¸ï¼ˆa&amp;&amp;bï¼‰</li>
<li>é€»è¾‘æˆ–ï¼ˆa||bï¼‰</li>
</ul>
</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// èµ‹å€¼</span></div><div class="line"><span class="keyword">let</span> (x, y) = (<span class="number">1</span>, <span class="number">2</span>)</div><div class="line"><span class="comment">// æ±‚ä½™</span></div><div class="line"><span class="number">8</span> % <span class="number">2.5</span> <span class="comment">// ç­‰äº0.5</span></div><div class="line"><span class="comment">// ç©ºåˆè¿ç®—</span></div><div class="line"><span class="keyword">var</span> b = <span class="built_in">nil</span></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span> = <span class="string">"not nil"</span></div><div class="line"><span class="keyword">var</span> a = b ?? <span class="built_in">c</span> <span class="comment">// not nil</span></div><div class="line"><span class="comment">// é—­åŒºé—´</span></div><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">1</span>...<span class="number">5</span> {</div><div class="line">  <span class="built_in">println</span>(index) <span class="comment">// indexä¸º1~5</span></div><div class="line">} </div><div class="line"><span class="comment">// åŠå¼€åŒºé—´</span></div><div class="line"><span class="keyword">for</span> index <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">4</span> {</div><div class="line">  <span class="built_in">print</span>(index) <span class="comment">// indexä¸º0~3</span></div><div class="line">}</div></pre></td></tr></table></figure>

<h1 id="å­—ç¬¦ä¸²å’Œå­—ç¬¦">å­—ç¬¦ä¸²å’Œå­—ç¬¦</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å­—é¢é‡</span></div><div class="line"><span class="keyword">let</span> dollarSign: <span class="type">Character</span> = <span class="string">"\u{24}"</span></div><div class="line"><span class="comment">// åˆå§‹åŒ–ç©ºå­—ç¬¦ä¸²</span></div><div class="line"><span class="keyword">var</span> empty = <span class="string">""</span></div><div class="line"><span class="keyword">var</span> anotherEmpty = <span class="type">String</span>()</div><div class="line"><span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span></div><div class="line"><span class="keyword">if</span> empty.isEmpty {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"empty"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// éå†å­—ç¬¦ä¸²</span></div><div class="line"><span class="keyword">for</span> character <span class="keyword">in</span> <span class="string">"Dog"</span> {</div><div class="line">  <span class="built_in">print</span>(character)</div><div class="line">}</div><div class="line"><span class="comment">// å­—ç¬¦æ•°</span></div><div class="line"><span class="keyword">let</span> str = <span class="string">"hello"</span></div><div class="line"><span class="built_in">println</span>(<span class="built_in">countElements</span>(str)) <span class="comment">// 5</span></div><div class="line"><span class="comment">// å­—ç¬¦ä¸²æ’å€¼</span></div><div class="line"><span class="keyword">let</span> greeting = <span class="string">"hello"</span></div><div class="line"><span class="keyword">let</span> msg = <span class="string">"<span class="subst">\(greeting)</span> world"</span></div><div class="line"><span class="comment">// å­—ç¬¦ä¸²ç›¸ç­‰</span></div><div class="line"><span class="keyword">let</span> a = <span class="string">"hello world"</span></div><div class="line"><span class="keyword">let</span> b = <span class="string">"hello world"</span></div><div class="line"><span class="keyword">if</span> a == b {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"the same"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// å‰ç¼€åç¼€</span></div><div class="line"><span class="keyword">let</span> str = <span class="string">"prefix and suffix"</span></div><div class="line"><span class="built_in">println</span>(str.hasPrefix(<span class="string">"prefix"</span>)) <span class="comment">// true</span></div><div class="line"><span class="built_in">println</span>(str.hasSuffix(<span class="string">"suffix"</span>)) <span class="comment">// true</span></div><div class="line"><span class="comment">// å¤§å†™å°å†™</span></div><div class="line"><span class="keyword">let</span> str = <span class="string">"hello world"</span></div><div class="line"><span class="keyword">let</span> upperCase = str.uppercaseString <span class="comment">// HELLO WORLD</span></div><div class="line"><span class="keyword">let</span> lowerCase = upperCase.lowercaseString <span class="comment">// hello world</span></div><div class="line"><span class="comment">// Unicode</span></div><div class="line"><span class="keyword">let</span> dogString = <span class="string">"Dog!ğŸ¶"</span></div><div class="line"><span class="keyword">for</span> codeUnit <span class="keyword">in</span> dogString.utf8 {</div><div class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(codeUnit)</span> "</span>)</div><div class="line">}</div><div class="line"><span class="comment">// 68 111 103 33 240 159 144 182</span></div><div class="line"><span class="keyword">for</span> codeUnit <span class="keyword">in</span> dogString.utf16 {</div><div class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(codeUnit)</span> "</span>)</div><div class="line">}</div><div class="line"><span class="comment">// 68 111 103 33 55357 56374</span></div><div class="line"><span class="keyword">for</span> scalar <span class="keyword">in</span> dogString.unicodeScalars {</div><div class="line">    <span class="built_in">print</span>(<span class="string">"<span class="subst">\(scalar.value)</span> "</span>)</div><div class="line">}</div><div class="line"><span class="comment">// 68 111 103 33 128054</span></div></pre></td></tr></table></figure>

<h1 id="é›†åˆç±»å‹">é›†åˆç±»å‹</h1>
<ul>
<li>æ•°ç»„</li>
<li>å­—å…¸</li>
</ul>
<h2 id="æ•°ç»„">æ•°ç»„</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ„é€ æ•°ç»„</span></div><div class="line"><span class="keyword">var</span> a = []</div><div class="line"><span class="keyword">var</span> b = [<span class="type">Int</span>]()</div><div class="line"><span class="comment">// æ„é€ 3ä¸ªåŒä¸º0.0çš„åˆå§‹å€¼</span></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span> = [<span class="type">Double</span>](<span class="built_in">count</span>: <span class="number">3</span>, repeatedValue: <span class="number">0.0</span>)</div><div class="line"><span class="comment">// æ•°ç»„ç›¸åŠ </span></div><div class="line"><span class="keyword">var</span> d = [<span class="string">"h"</span>, <span class="string">"e"</span>] + [<span class="string">"l"</span>, <span class="string">"l"</span>, <span class="string">"o"</span>]</div><div class="line"><span class="keyword">var</span> shoppingList: [<span class="type">String</span>] = [<span class="string">"Eggs"</span>, <span class="string">"Milk"</span>]</div><div class="line"><span class="comment">// æ•°ç»„å¤§å°</span></div><div class="line">shoppingList.<span class="built_in">count</span></div><div class="line"><span class="comment">// æ˜¯å¦ä¸ºç©º</span></div><div class="line"><span class="keyword">if</span> shoppingList.isEmpty {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"list is empty"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// æ·»åŠ ä¸€é¡¹åˆ°æœ€å</span></div><div class="line">shoppingList.append(<span class="string">"Flour"</span>)</div><div class="line"><span class="comment">// æ·»åŠ å¤šé¡¹åˆ°æœ€å</span></div><div class="line">shoppingList += [<span class="string">"Cheese"</span>, <span class="string">"Butter"</span>]</div><div class="line"><span class="comment">// æ·»åŠ ä¸€é¡¹åˆ°æŒ‡å®šä½ç½®</span></div><div class="line">shoppingList.insert(<span class="string">"Bean"</span>, atIndex: <span class="number">0</span>)</div><div class="line"><span class="comment">// åˆ é™¤æŒ‡å®šä¸€é¡¹</span></div><div class="line">shoppingList.removeAtIndex(<span class="number">0</span>)</div><div class="line"><span class="comment">// åˆ é™¤æœ€åä¸€é¡¹</span></div><div class="line">shoppingList.removeLast()</div><div class="line"><span class="comment">// æ‰¹é‡æ›¿æ¢</span></div><div class="line">shoppingList[<span class="number">1</span>...<span class="number">3</span>] = [<span class="string">"Bananas"</span>, <span class="string">"Apples"</span>]</div><div class="line"><span class="comment">// éå†</span></div><div class="line"><span class="keyword">for</span> item <span class="keyword">in</span> shoppingList {</div><div class="line">  <span class="built_in">println</span>(item)</div><div class="line">}</div><div class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> <span class="class"><span class="keyword">enum</span><span class="title">erate</span>(<span class="title">shoppingList</span>) </span>{</div><div class="line">  <span class="built_in">println</span>(<span class="string">"Item <span class="subst">\(index + <span class="number">1</span>)</span>: <span class="subst">\(value)</span>"</span>)</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="å­—å…¸">å­—å…¸</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ„é€ å­—å…¸</span></div><div class="line"><span class="keyword">var</span> a = [<span class="string">"TYO"</span>: <span class="string">"Tokyo"</span>, <span class="string">"DUB"</span>: <span class="string">"Dublin"</span>]</div><div class="line"><span class="keyword">var</span> b = <span class="type">Dictionary</span>&lt;<span class="type">Int</span>, <span class="type">String</span>&gt;()</div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span>[<span class="number">16</span>] = <span class="string">"sixteen"</span></div><div class="line"><span class="keyword">var</span> <span class="built_in">c</span> = [:]</div><div class="line"><span class="keyword">var</span> airports: [<span class="type">String</span>: <span class="type">String</span>] = [<span class="string">"TYO"</span>: <span class="string">"Tokyo"</span>, <span class="string">"DUB"</span>: <span class="string">"Dublin"</span>]</div><div class="line"><span class="comment">// å­—å…¸å¤§å°</span></div><div class="line">airports.<span class="built_in">count</span></div><div class="line"><span class="comment">// æ˜¯å¦ä¸ºç©º</span></div><div class="line"><span class="keyword">if</span> airports.isEmpty {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"list is empty"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// æ·»åŠ ä¸€é¡¹</span></div><div class="line">airports[<span class="string">"LHR"</span>] = <span class="string">"London"</span></div><div class="line"><span class="comment">// ä¿®æ”¹</span></div><div class="line">airports[<span class="string">"LHR"</span>] = <span class="string">"London Heathrow"</span></div><div class="line"><span class="comment">// ä¿®æ”¹ï¼Œè¿”å›ä¿®æ”¹å‰çš„å€¼</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> oldValue = airports.updateValue(<span class="string">"Dublin Internation"</span>, forKey: <span class="string">"DUB"</span>) {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"The old vaule was <span class="subst">\(oldValue)</span>"</span>)</div><div class="line">} <span class="keyword">else</span> {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"That is not in the list"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// åˆ é™¤</span></div><div class="line">airports[<span class="string">"LHR"</span>] = <span class="built_in">nil</span></div><div class="line"><span class="comment">// åˆ é™¤ï¼Œè¿”å›è¢«åˆ é™¤çš„å€¼</span></div><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> removedValue = airports.removeVauleForKey(<span class="string">"DUB"</span>) {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"The removed item is <span class="subst">\(removedValue)</span>"</span>)</div><div class="line">} <span class="keyword">else</span> {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"That is not in the list"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// éå†</span></div><div class="line"><span class="keyword">for</span> (airportCode, airportName) <span class="keyword">in</span> airports {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"<span class="subst">\(airportCode)</span>: <span class="subst">\(airportName)</span>"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// éå†key</span></div><div class="line"><span class="keyword">for</span> airportCode <span class="keyword">in</span> airports.keys {</div><div class="line">  <span class="built_in">println</span>(airportCode)</div><div class="line">}</div><div class="line"><span class="comment">// éå†value</span></div><div class="line"><span class="keyword">for</span> airportName <span class="keyword">in</span> airports.values {</div><div class="line">  <span class="built_in">println</span>(airportName)</div><div class="line">}</div><div class="line"><span class="comment">// ç”¨keysæˆ–valuesæ„é€ æ–°æ•°ç»„</span></div><div class="line"><span class="keyword">let</span> airportCodes = <span class="type">Array</span>(airports.keys)</div><div class="line"><span class="keyword">let</span> airportNames = <span class="type">Array</span>(airports.values)</div></pre></td></tr></table></figure>

<h1 id="æ§åˆ¶æµ">æ§åˆ¶æµ</h1>
<ul>
<li>å¾ªç¯è¯­å¥<ul>
<li>for</li>
<li>while</li>
</ul>
</li>
<li>æ¡ä»¶è¯­å¥<ul>
<li>if</li>
<li>switch</li>
<li>where</li>
</ul>
</li>
<li>æ§åˆ¶è½¬ç§»è¯­å¥<ul>
<li>continue</li>
<li>break</li>
<li>fallthrough</li>
<li>return</li>
</ul>
</li>
</ul>
<h2 id="å¾ªç¯è¯­å¥">å¾ªç¯è¯­å¥</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// éå†åŒºé—´</span></div><div class="line"><span class="keyword">for</span> <span class="number">_</span> <span class="keyword">in</span> <span class="number">1</span>...<span class="number">5</span> {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"hello world"</span>);</div><div class="line">}</div><div class="line"><span class="comment">// éå†æ•°ç»„</span></div><div class="line"><span class="keyword">let</span> names = [<span class="string">"Anna"</span>, <span class="string">"Alex"</span>, <span class="string">"Brian"</span>, <span class="string">"Jack"</span>]</div><div class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"Hello, <span class="subst">\(name)</span>"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// éå†å­—å…¸</span></div><div class="line"><span class="keyword">let</span> numOfLegs = [<span class="string">"spider"</span>: <span class="number">8</span>, <span class="string">"ant"</span>: <span class="number">6</span>, <span class="string">"cat"</span>: <span class="number">4</span>]</div><div class="line"><span class="keyword">for</span> (name, <span class="built_in">count</span>) <span class="keyword">in</span> numOfLegs {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"<span class="subst">\(name)</span> have <span class="subst">\(<span class="built_in">count</span>)</span> legs"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// éå†å­—ç¬¦ä¸²</span></div><div class="line"><span class="keyword">for</span> char <span class="keyword">in</span> <span class="string">"Hello"</span> {</div><div class="line">  <span class="built_in">println</span>(char)</div><div class="line">}</div><div class="line"><span class="comment">// æ¡ä»¶é€’å¢</span></div><div class="line"><span class="keyword">for</span> <span class="keyword">var</span> index = <span class="number">0</span>; index &lt; <span class="number">3</span>; ++index {</div><div class="line">  <span class="built_in">println</span>(index)</div><div class="line">}</div><div class="line"><span class="comment">// whileå¾ªç¯</span></div><div class="line"><span class="keyword">var</span> i = <span class="number">0</span></div><div class="line"><span class="keyword">while</span> i &lt; <span class="number">10</span> {</div><div class="line">  <span class="built_in">println</span>(i++)</div><div class="line">}</div><div class="line"><span class="keyword">var</span> j = <span class="number">0</span></div><div class="line"><span class="keyword">do</span> {</div><div class="line">  <span class="built_in">println</span>(j++)</div><div class="line">} <span class="keyword">while</span> j &lt; <span class="number">10</span></div></pre></td></tr></table></figure>

<h2 id="æ¡ä»¶è¯­å¥">æ¡ä»¶è¯­å¥</h2>
<h3 id="if">if</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = -<span class="number">1</span></div><div class="line"><span class="keyword">if</span> a &lt; <span class="number">0</span> {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"condition 1"</span>)</div><div class="line">} <span class="keyword">else</span> <span class="keyword">if</span> (a &gt; <span class="number">10</span>) {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"condition 2"</span>)</div><div class="line">} <span class="keyword">else</span> {</div><div class="line">  <span class="built_in">println</span>(<span class="string">"condition 4"</span>)</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="switch">switch</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æ­£ç¡®</span></div><div class="line"><span class="keyword">let</span> someCharacter: <span class="type">Character</span> = <span class="string">"e"</span></div><div class="line"><span class="keyword">switch</span> someCharacter {</div><div class="line"><span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"<span class="subst">\(someCharacter)</span> is a vowel"</span>)</div><div class="line"><span class="keyword">case</span> <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"f"</span>, <span class="string">"g"</span>, <span class="string">"h"</span>, <span class="string">"j"</span>, <span class="string">"k"</span>, <span class="string">"l"</span>, <span class="string">"m"</span>,</div><div class="line"><span class="string">"n"</span>, <span class="string">"p"</span>, <span class="string">"q"</span>, <span class="string">"r"</span>, <span class="string">"s"</span>, <span class="string">"t"</span>, <span class="string">"v"</span>, <span class="string">"w"</span>, <span class="string">"x"</span>, <span class="string">"y"</span>, <span class="string">"z"</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"<span class="subst">\(someCharacter)</span> is a consonant"</span>)</div><div class="line"><span class="keyword">default</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"<span class="subst">\(someCharacter)</span> is not a vowel or a consonant"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// é”™è¯¯</span></div><div class="line"><span class="keyword">let</span> anotherCharacter: <span class="type">Character</span> = <span class="string">"a"</span></div><div class="line"><span class="keyword">switch</span> anotherCharacter {</div><div class="line"><span class="keyword">case</span> <span class="string">"a"</span>:</div><div class="line"><span class="keyword">case</span> <span class="string">"A"</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"The letter A"</span>)</div><div class="line"><span class="keyword">default</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"Not the letter A"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// åŒºé—´åŒ¹é…</span></div><div class="line"><span class="keyword">let</span> score = <span class="number">80</span></div><div class="line"><span class="keyword">switch</span> score {</div><div class="line"><span class="keyword">case</span> <span class="number">0</span>...<span class="number">59</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"bad"</span>)</div><div class="line"><span class="keyword">case</span> <span class="number">60</span>...<span class="number">79</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"ok"</span>)</div><div class="line"><span class="keyword">case</span> <span class="number">80</span>...<span class="number">89</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"excellent"</span>)</div><div class="line"><span class="keyword">case</span> <span class="number">90</span>...<span class="number">100</span></div><div class="line">  <span class="built_in">println</span>(<span class="string">"perfect"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// å…ƒç»„</span></div><div class="line"><span class="keyword">let</span> somePoint = (<span class="number">1</span>, <span class="number">1</span>)</div><div class="line"><span class="keyword">switch</span> somePoint {</div><div class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="number">0</span>):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(0, 0) is at the origin"</span>)</div><div class="line"><span class="keyword">case</span> (<span class="number">_</span>, <span class="number">0</span>):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(<span class="subst">\(somePoint.<span class="number">0</span>)</span>, 0) is on the x-axis"</span>)</div><div class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="number">_</span>):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(0, <span class="subst">\(somePoint.<span class="number">1</span>)</span>) is on the y-axis"</span>)</div><div class="line"><span class="keyword">case</span> (-<span class="number">2</span>...<span class="number">2</span>, -<span class="number">2</span>...<span class="number">2</span>):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(<span class="subst">\(somePoint.<span class="number">0</span>)</span>, <span class="subst">\(somePoint.<span class="number">1</span>)</span>) is inside the box"</span>)</div><div class="line"><span class="keyword">default</span>:</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(<span class="subst">\(somePoint.<span class="number">0</span>)</span>, <span class="subst">\(somePoint.<span class="number">1</span>)</span>) is outside of the box"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// å€¼ç»‘å®š</span></div><div class="line"><span class="keyword">let</span> anotherPoint = (<span class="number">2</span>, <span class="number">0</span>)</div><div class="line"><span class="keyword">switch</span> anotherPoint {</div><div class="line"><span class="keyword">case</span> (<span class="keyword">let</span> x, <span class="number">0</span>):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"on the x-axis with an x value of <span class="subst">\(x)</span>"</span>)</div><div class="line"><span class="keyword">case</span> (<span class="number">0</span>, <span class="keyword">let</span> y):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"on the y-axis with a y value of <span class="subst">\(y)</span>"</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"somewhere else at (<span class="subst">\(x)</span>, <span class="subst">\(y)</span>)"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// where</span></div><div class="line"><span class="keyword">let</span> yetAnotherPoint = (<span class="number">1</span>, -<span class="number">1</span>)</div><div class="line"><span class="keyword">switch</span> yetAnotherPoint {</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == y:</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(<span class="subst">\(x)</span>, <span class="subst">\(y)</span>) is on the line x == y"</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y) <span class="keyword">where</span> x == -y:</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(<span class="subst">\(x)</span>, <span class="subst">\(y)</span>) is on the line x == -y"</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> (x, y):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"(<span class="subst">\(x)</span>, <span class="subst">\(y)</span>) is just some arbitrary point"</span>)</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="æ§åˆ¶è½¬ç§»è¯­å¥">æ§åˆ¶è½¬ç§»è¯­å¥</h2>
<h3 id="continue">continue</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ç»§ç»­ä¸‹ä¸ªå¾ªç¯</span></div><div class="line"><span class="keyword">let</span> input = <span class="string">"great minds think alike"</span></div><div class="line"><span class="keyword">var</span> output = <span class="string">""</span></div><div class="line"><span class="keyword">for</span> <span class="keyword">char</span> <span class="keyword">in</span> input {</div><div class="line">  <span class="keyword">switch</span> <span class="keyword">char</span> {</div><div class="line">  <span class="keyword">case</span> <span class="string">"a"</span>, <span class="string">"e"</span>, <span class="string">"i"</span>, <span class="string">"o"</span>, <span class="string">"u"</span>:</div><div class="line">    <span class="keyword">continue</span></div><div class="line">  <span class="keyword">default</span>:</div><div class="line">    output.append(<span class="keyword">char</span>)</div><div class="line">  }</div><div class="line">}</div><div class="line">println(output)</div></pre></td></tr></table></figure>

<h3 id="break">break</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// å¾ªç¯è¯­å¥ä¸­çš„breakï¼Œç»“æŸå¾ªç¯</span></div><div class="line"><span class="keyword">for</span> char <span class="keyword">in</span> <span class="string">"hello"</span> {</div><div class="line">  <span class="keyword">if</span> char == <span class="string">"l"</span> {</div><div class="line">    <span class="keyword">break</span></div><div class="line">  }</div><div class="line">}</div><div class="line"><span class="comment">// switchè¯­å¥ä¸­å¾—breakï¼Œå¿½ç•¥è¯¥åˆ†æ”¯</span></div><div class="line"><span class="keyword">let</span> numberSymbol: <span class="type">Character</span> = <span class="string">"ä¸‰"</span></div><div class="line"><span class="keyword">switch</span> numberSymbol {</div><div class="line"><span class="keyword">case</span> <span class="string">"ä¸€"</span>:</div><div class="line">    <span class="built_in">println</span>(<span class="string">"1"</span>)</div><div class="line"><span class="keyword">case</span> <span class="string">"äºŒ"</span>:</div><div class="line">    <span class="built_in">println</span>(<span class="string">"2"</span>)</div><div class="line"><span class="keyword">case</span> <span class="string">"ä¸‰"</span>:</div><div class="line">    <span class="built_in">println</span>(<span class="string">"3"</span>)</div><div class="line"><span class="keyword">case</span> <span class="string">"å››"</span>:</div><div class="line">    <span class="built_in">println</span>(<span class="string">"4"</span>)</div><div class="line"><span class="keyword">default</span>:</div><div class="line">    <span class="keyword">break</span></div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="fallthrough">fallthrough</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä½¿ç”¨fallthroughè´¯ç©¿ä¸‹ä¸ªåˆ†æ”¯</span></div><div class="line"><span class="keyword">let</span> integerToDescribe = <span class="number">5</span></div><div class="line"><span class="keyword">var</span> description = <span class="string">"The number <span class="subst">\(integerToDescribe)</span> is"</span></div><div class="line"><span class="keyword">switch</span> integerToDescribe {</div><div class="line"><span class="keyword">case</span> <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">11</span>, <span class="number">13</span>, <span class="number">17</span>, <span class="number">19</span>:</div><div class="line">    description += <span class="string">" a prime number, and also"</span></div><div class="line">    <span class="keyword">fallthrough</span></div><div class="line"><span class="keyword">default</span>:</div><div class="line">    description += <span class="string">" an integer."</span></div><div class="line">}</div><div class="line"><span class="built_in">println</span>(description)</div></pre></td></tr></table></figure>

<h3 id="å¸¦æ ‡ç­¾çš„è¯­å¥">å¸¦æ ‡ç­¾çš„è¯­å¥</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> åœ¨ä½¿ç”¨<span class="keyword">break</span>æˆ–<span class="keyword">continue</span>çš„æ—¶å€™å¯ä»¥æŒ‡å®šæ“ä½œå“ªä¸ªæ§åˆ¶æµ</div><div class="line"><span class="reserved">var</span> i = <span class="number">0</span>;</div><div class="line"><span class="attribute">loop</span>: <span class="keyword">while</span> i &lt; <span class="number">100</span> {</div><div class="line">  <span class="keyword">if</span> i == <span class="number">30</span> {</div><div class="line">    <span class="keyword">break</span> <span class="keyword">loop</span></div><div class="line">  }</div><div class="line">  i++</div><div class="line">}</div></pre></td></tr></table></figure>

<h1 id="å‡½æ•°">å‡½æ•°</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line">// æœ‰è¿”å›å€¼</div><div class="line">func len(<span class="operator"><span class="keyword">start</span>: <span class="built_in">Int</span>, <span class="keyword">end</span>: <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> {</span></div><div class="line">  <span class="keyword">return</span> <span class="keyword">end</span> - <span class="keyword">start</span></div><div class="line">}</div><div class="line">// æ— è¿”å›å€¼</div><div class="line">func sayHello(name: <span class="keyword">String</span>) {</div><div class="line">  println(<span class="string">"Hello, \(name)"</span>)</div><div class="line">}</div><div class="line">// å¤šé‡è¿”å›å€¼</div><div class="line">func search(name: <span class="keyword">String</span>) -&gt; (id: <span class="built_in">Int</span>, name: <span class="keyword">String</span>) {</div><div class="line">  <span class="keyword">var</span> map = [<span class="string">"jason"</span>: <span class="number">1</span>, <span class="string">"mark"</span>: <span class="number">2</span>]</div><div class="line">  <span class="keyword">return</span> (name, map[name])</div><div class="line">}</div><div class="line">// å¤–éƒ¨å‚æ•°å</div><div class="line">func <span class="keyword">join</span>(<span class="keyword">str</span> s1: <span class="keyword">String</span>, toStr s2: <span class="keyword">String</span>, joiner joiner: <span class="keyword">String</span>) -&gt; <span class="keyword">String</span> {</div><div class="line">    <span class="keyword">return</span> s1 + joiner + s2</div><div class="line">}</div><div class="line"><span class="keyword">join</span>(<span class="keyword">str</span>: <span class="string">"hello"</span>, toStr: <span class="string">"world"</span>, joiner: <span class="string">"ï¼Œ"</span>)</div><div class="line">// ç®€å†™å¤–éƒ¨å‚æ•°å</div><div class="line">func <span class="keyword">join</span>(#<span class="keyword">str</span>: <span class="keyword">String</span>, #toStr: <span class="keyword">String</span>, #joiner: <span class="keyword">String</span>) -&gt; <span class="keyword">String</span> {</div><div class="line">  <span class="keyword">return</span> <span class="keyword">str</span> + joiner + toStr</div><div class="line">}</div><div class="line"><span class="keyword">join</span>(<span class="keyword">str</span>: <span class="string">"hello"</span>, toStr: <span class="string">"world"</span>, joiner: <span class="string">"ï¼Œ"</span>)</div><div class="line">// é»˜è®¤å‚æ•°</div><div class="line">func <span class="keyword">join</span>(<span class="keyword">str</span> s1: <span class="keyword">String</span>, toStr s2: <span class="keyword">String</span>, joiner joiner: <span class="keyword">String</span> = <span class="string">" "</span>) -&gt; <span class="keyword">String</span> {</div><div class="line">  <span class="keyword">return</span> <span class="keyword">str</span> + joiner + toStr</div><div class="line">}</div><div class="line"><span class="keyword">join</span>(<span class="keyword">str</span>: <span class="string">"hello"</span>, toStr: <span class="string">"world"</span>)</div><div class="line">// é»˜è®¤å¸¦ä¸Šå¤–éƒ¨å‚æ•°</div><div class="line">func <span class="keyword">join</span>(s1: <span class="keyword">String</span>, s2: <span class="keyword">String</span>, joiner: <span class="keyword">String</span> = <span class="string">" "</span>) -&gt; <span class="keyword">String</span> {</div><div class="line">    <span class="keyword">return</span> s1 + joiner + s2</div><div class="line">}</div><div class="line"><span class="keyword">join</span>(<span class="string">"hello"</span>, <span class="string">"world"</span>, joiner: <span class="string">"-"</span>)</div><div class="line">// å¯å˜å‚æ•°</div><div class="line">func arithmeticMean(numbers: <span class="keyword">Double</span>...) -&gt; <span class="keyword">Double</span> {</div><div class="line">    <span class="keyword">var</span> total: <span class="keyword">Double</span> = <span class="number">0</span></div><div class="line">    <span class="keyword">for</span> <span class="built_in">number</span> <span class="keyword">in</span> numbers {</div><div class="line">        total += <span class="built_in">number</span></div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> total / <span class="keyword">Double</span>(numbers.<span class="keyword">count</span>)</div><div class="line">}</div><div class="line">arithmeticMean(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</div><div class="line">// å‡½æ•°å‚æ•°é»˜è®¤æ˜¯å¸¸é‡ï¼Œä¸èƒ½æ”¹å˜ï¼Œå¯ä»¥åŠ <span class="keyword">var</span>æ¥å®šä¹‰å˜é‡å‚æ•°</div><div class="line">func hello(<span class="keyword">var</span> <span class="keyword">str</span>: <span class="keyword">String</span>) -&gt; <span class="keyword">String</span> {</div><div class="line">  <span class="keyword">str</span> += <span class="string">",hello"</span></div><div class="line">  <span class="keyword">return</span> <span class="keyword">str</span></div><div class="line">}</div><div class="line">// æ”¹å˜å‚æ•°å€¼ï¼ŒåŠ inoutï¼Œä¸”ä¸èƒ½è¢«<span class="keyword">var</span>æˆ–letæ ‡è®°</div><div class="line">func swapTwoInts(inout a: <span class="built_in">Int</span>, inout b: <span class="built_in">Int</span>) {</div><div class="line">    let temporaryA = a</div><div class="line">    a = b</div><div class="line">    b = temporaryA</div><div class="line">}</div><div class="line"><span class="keyword">var</span> someInt = <span class="number">3</span></div><div class="line"><span class="keyword">var</span> anotherInt = <span class="number">107</span></div><div class="line">swapTwoInts(&someInt, &anotherInt) // ä¼ å…¥æ—¶åŠ &</div><div class="line">println(<span class="string">"\(someInt) and \(anotherInt)"</span>) // <span class="number">107</span> <span class="keyword">and</span> <span class="number">3</span></div><div class="line">// ä½¿ç”¨å‡½æ•°</div><div class="line"><span class="keyword">var</span> mathFunction: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> = addTwoInts</div><div class="line"><span class="keyword">var</span> anotherMathFunction = addTwoInts</div><div class="line">// å‡½æ•°ä½œä¸ºå‚æ•°</div><div class="line">func printMathResult(mathFunction: (<span class="built_in">Int</span>, <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span>, a: <span class="built_in">Int</span>, b: <span class="built_in">Int</span>) {</div><div class="line">    println(<span class="string">"Result: \(mathFunction(a, b))"</span>)</div><div class="line">}</div><div class="line">printMathResult(addTwoInts, <span class="number">3</span>, <span class="number">5</span>)</div><div class="line">// å‡½æ•°ä½œä¸ºè¿”å›å€¼</div><div class="line">func stepForward(<span class="keyword">input</span>: <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> {</div><div class="line">    <span class="keyword">return</span> <span class="keyword">input</span> + <span class="number">1</span></div><div class="line">}</div><div class="line">func stepBackward(<span class="keyword">input</span>: <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> {</div><div class="line">    <span class="keyword">return</span> <span class="keyword">input</span> - <span class="number">1</span></div><div class="line">}</div><div class="line">func chooseStepFunction(backwards: Bool) -&gt; (<span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> {</div><div class="line">    <span class="keyword">return</span> backwards ? stepBackward : stepForward</div><div class="line">}</div><div class="line">// åµŒå¥—å‡½æ•°</div><div class="line">func chooseStepFunction(backwards: Bool) -&gt; (<span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> {</div><div class="line">    func stepForward(<span class="keyword">input</span>: <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> { <span class="keyword">return</span> <span class="keyword">input</span> + <span class="number">1</span> }</div><div class="line">    func stepBackward(<span class="keyword">input</span>: <span class="built_in">Int</span>) -&gt; <span class="built_in">Int</span> { <span class="keyword">return</span> <span class="keyword">input</span> - <span class="number">1</span> }</div><div class="line">    <span class="keyword">return</span> backwards ? stepBackward : stepForward</div><div class="line">}</div></pre></td></tr></table></figure>

<h1 id="é—­åŒ…">é—­åŒ…</h1>
<h2 id="æ ¼å¼">æ ¼å¼</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> æ ¼å¼</div><div class="line">{ <span class="function"><span class="params">(parameters)</span> -&gt;</span> returnType <span class="keyword">in</span></div><div class="line">  statements</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="é—­åŒ…ä½œä¸ºå‚æ•°">é—­åŒ…ä½œä¸ºå‚æ•°</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> åŸå¼</div><div class="line">func backwards<span class="function"><span class="params">(s1: String, s2: String)</span> -&gt;</span> Bool {</div><div class="line">    <span class="keyword">return</span> s1 &gt; s2</div><div class="line">}</div><div class="line"><span class="reserved">var</span> reversed = sorted(names, backwards)</div><div class="line"><span class="regexp">//</span> ä½¿ç”¨é—­åŒ…</div><div class="line"><span class="reserved">var</span> reversed = sorted<span class="function"><span class="params">(names, { (s1: String, s2: String) -&gt; Bool <span class="keyword">in</span></span></span></div><div class="line">  <span class="keyword">return</span> s1 &gt; s2</div><div class="line">})</div><div class="line">// æ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­ç±»å‹</div><div class="line"><span class="title">var</span> <span class="title">reversed</span> = <span class="title">sorted</span><span class="params">(names, { s1, s2 <span class="keyword">in</span> <span class="keyword">return</span> s1 &gt; s2 })</span></div><div class="line">// å•è¡¨è¾¾å¼é—­åŒ…éšå¼è¿”å›</div><div class="line"><span class="title">var</span> <span class="title">reversed</span> = <span class="title">sorted</span><span class="params">(names, { s1, s2 <span class="keyword">in</span> s1 &gt; s2})</span></div><div class="line">// å‚æ•°åç§°ç¼©å†™</div><div class="line"><span class="title">var</span> <span class="title">reversed</span> = <span class="title">sorted</span><span class="params">(names, { $<span class="number">0</span> &gt; $<span class="number">1</span> })</span></div><div class="line">// è¿ç®—ç¬¦å‡½æ•°</div><div class="line"><span class="title">var</span> <span class="title">reversed</span> = <span class="title">sorted</span><span class="params">(names, &gt;)</span></div><div class="line">// å°¾éšé—­åŒ…è¿›è¡Œå‡½æ•°è°ƒç”¨</div><div class="line"><span class="title">func</span> <span class="title">someFunctionThatTakesAClosure</span><span class="params">(closure: () -&gt; ())</span> {</div><div class="line">  // å‡½æ•°ä½“éƒ¨åˆ†</div><div class="line">}</div><div class="line"><span class="title">someFunctionThatTakesAClosure</span><span class="params">()</span> {</div><div class="line">  // é—­åŒ…ä¸»ä½“éƒ¨åˆ†</div><div class="line">}</div><div class="line">// å°¾éšé—­åŒ…è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼ˆä¾‹å­ï¼‰</div><div class="line"><span class="title">var</span> <span class="title">reversed</span> = <span class="title">sorted</span><span class="params">(names)</span> { <span class="title">$0</span> &gt; <span class="title">$1</span> }</div></pre></td></tr></table></figure>

<h2 id="é—­åŒ…ä½œä¸ºè¿”å›å€¼">é—­åŒ…ä½œä¸ºè¿”å›å€¼</h2>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="regexp">//</span> é—­åŒ…æ˜¯å¼•ç”¨ç±»å‹ï¼Œå°†é—­åŒ…èµ‹ç»™ä¸¤ä¸ªä¸åŒçš„å˜é‡/å¸¸é‡ï¼Œä¸¤ä¸ªå€¼éƒ½æŒ‡å‘ä¸€ä¸ªé—­åŒ…</div><div class="line">func makeIncrementor<span class="function"><span class="params">(forIncrement amount: Int)</span> -&gt;</span> <span class="function"><span class="params">()</span> -&gt;</span> Int {</div><div class="line">    <span class="reserved">var</span> runningTotal = <span class="number">0</span></div><div class="line">    func incrementor<span class="function"><span class="params">()</span> -&gt;</span> Int {</div><div class="line">        runningTotal += amount</div><div class="line">        <span class="keyword">return</span> runningTotal</div><div class="line">    }</div><div class="line">    <span class="keyword">return</span> incrementor</div><div class="line">}</div><div class="line"><span class="reserved">let</span> incrementByTen = makeIncrementor(<span class="attribute">forIncrement</span>: <span class="number">10</span>)</div><div class="line"><span class="reserved">let</span> incrementBySeven = makeIncrementor(<span class="attribute">forIncrement</span>: <span class="number">7</span>)</div><div class="line">incrementBySeven() <span class="regexp">//</span> è¿”å›çš„å€¼ä¸º<span class="number">7</span></div><div class="line">incrementByTen() <span class="regexp">//</span> è¿”å›çš„å€¼ä¸º<span class="number">40</span></div></pre></td></tr></table></figure>

<h1 id="æšä¸¾">æšä¸¾</h1>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CompassPoint</span> </span>{</div><div class="line">  <span class="keyword">case</span> <span class="type">North</span></div><div class="line">  <span class="keyword">case</span> <span class="type">South</span></div><div class="line">  <span class="keyword">case</span> <span class="type">East</span></div><div class="line">  <span class="keyword">case</span> <span class="type">West</span></div><div class="line">}</div><div class="line"><span class="comment">// ä¸€è¡Œ</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span> </span>{</div><div class="line">  <span class="keyword">case</span> <span class="type">Mercury</span>, <span class="type">Venus</span>, <span class="type">Earth</span>, <span class="type">Mars</span>, <span class="type">Jupiter</span>, <span class="type">Saturn</span>, <span class="type">Uranus</span>, <span class="type">Neptune</span></div><div class="line">}</div><div class="line"><span class="keyword">var</span> directionToHead = <span class="type">CompassPoint</span>.<span class="type">West</span></div><div class="line">directionToHead = .<span class="type">East</span> <span class="comment">// å‰é¢å·²ç»èµ‹å€¼äº†ï¼Œå¯ä»¥ç”¨å¿½ç•¥å‰ç¼€</span></div><div class="line"><span class="keyword">switch</span> directionToHead {</div><div class="line"><span class="keyword">case</span> .<span class="type">North</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"North"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">South</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"South"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">East</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"East"</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">West</span>:</div><div class="line">  <span class="built_in">println</span>(<span class="string">"West"</span>)</div><div class="line">}</div><div class="line"><span class="comment">// ä½¿ç”¨æ¡ˆä¾‹</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Barcode</span> </span>{</div><div class="line">  <span class="keyword">case</span> <span class="type">UPCA</span>(<span class="type">Int</span>, <span class="type">Int</span>, <span class="type">Int</span>)</div><div class="line">  <span class="keyword">case</span> <span class="type">QRCode</span>(<span class="type">String</span>)</div><div class="line">}</div><div class="line"><span class="keyword">var</span> productBarcode = <span class="type">Barcode</span>.<span class="type">UPCS</span>(<span class="number">8</span>, <span class="number">85909_51226</span>, <span class="number">3</span>)</div><div class="line">productBarcode = .<span class="type">QRCode</span>(<span class="string">"ABCDEFGHIJKLMNOP"</span>)</div><div class="line"><span class="comment">// ç”¨æ³•</span></div><div class="line"><span class="keyword">switch</span> productBarcode {</div><div class="line"><span class="keyword">case</span> .<span class="type">UPCA</span>(<span class="keyword">let</span> numberSystem, <span class="keyword">let</span> identifier, <span class="keyword">let</span> check):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"UPC-A with value of <span class="subst">\(numberSystem)</span>, <span class="subst">\(identifier)</span>, <span class="subst">\(check)</span>."</span>)</div><div class="line"><span class="keyword">case</span> .<span class="type">QRCode</span>(<span class="keyword">let</span> productCode):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"QR code with value of <span class="subst">\(productCode)</span>."</span>)</div><div class="line">}</div><div class="line"><span class="comment">// ç®€åŒ–</span></div><div class="line"><span class="keyword">switch</span> productBarcode {</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">UPCA</span>(numberSystem, identifier, check):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"UPC-A with value of <span class="subst">\(numberSystem)</span>, <span class="subst">\(identifier)</span>, <span class="subst">\(check)</span>."</span>)</div><div class="line"><span class="keyword">case</span> <span class="keyword">let</span> .<span class="type">QRCode</span>(productCode):</div><div class="line">    <span class="built_in">println</span>(<span class="string">"QR code with value of <span class="subst">\(productCode)</span>."</span>)</div><div class="line">}</div><div class="line"><span class="comment">// èµ‹åŸå§‹å€¼ï¼Œå½“æ•´å‹è¢«èµ‹åŸå§‹å€¼ï¼Œå…¶ä»–æˆå‘˜æ²¡æœ‰å€¼ï¼Œä¼šè‡ªåŠ¨é€’å¢</span></div><div class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Planet</span>: <span class="title">Int</span> </span>{</div><div class="line">    <span class="keyword">case</span> <span class="type">Mercury</span> = <span class="number">1</span>, <span class="type">Venus</span>, <span class="type">Earth</span>, <span class="type">Mars</span>, <span class="type">Jupiter</span>, <span class="type">Saturn</span>, <span class="type">Uranus</span>, <span class="type">Neptune</span></div><div class="line">}</div><div class="line"><span class="keyword">let</span> earthsOrder = <span class="type">Planet</span>.<span class="type">Earth</span>.toRaw() <span class="comment">// earthsOrderä¸º3</span></div><div class="line"><span class="keyword">let</span> possiblePlanet = <span class="type">Planet</span>.fromRaw(<span class="number">7</span>) <span class="comment">// possiblePlanetä¸ºå¯é€‰å€¼ï¼Œä¸ºPlanet.Uranus</span></div></pre></td></tr></table></figure>

<p>æœªå®Œå¾…ç»­</p>
]]></content>
    <summary type="html">
    <![CDATA[<h1 id="åŸºç¡€éƒ¨åˆ†">åŸºç¡€éƒ¨åˆ†</h1>
<h2 id="å¸¸é‡ä¸å˜é‡">å¸¸é‡ä¸å˜é‡</h2>
<ul>
<li>letï¼ˆå¸¸é‡ï¼‰</li>
<li>varï¼ˆå˜é‡ï¼‰</li>
</ul>
<figure class="highlight"><table><tr><td clas]]>
    </summary>
    
      <category term="IOS" scheme="http://yoursite.com/tags/IOS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[NodeJsæ•™ç¨‹]]></title>
    <link href="http://yoursite.com/2014/10/29/NodeJs%E6%95%99%E7%A8%8B/"/>
    <id>http://yoursite.com/2014/10/29/NodeJsæ•™ç¨‹/</id>
    <published>2014-10-29T07:53:03.000Z</published>
    <updated>2015-01-26T14:50:24.000Z</updated>
    <content type="html"><![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2>
<p>éšç€Node.jsçš„å‘å±•ï¼ŒJavascriptåº”ç”¨åœ¨è¿™å‡ å¹´çªé£çŒ›è¿›çš„æµè¡Œã€‚å¦‚æœä½ å»<a href="//www.modulecounts.com/">modulecounts.com</a>ä¸Šçœ‹çœ‹ï¼Œä½ ä¼šå‘ç°Node packageså·²ç»è¶…è¿‡äº†Rubyã€‚å¦å¤–Node packagesçš„å‘å±•é€Ÿåº¦å·²ç»è¶…è¿‡äº†Rubyã€Pythonå’ŒJavaæ€»å’Œã€‚<br><img src="/img/node/img-1.jpg" alt="modulecounts"><br>åœ¨è¿™ç¯‡æ–‡ç« é‡Œå°†ä»‹ç»Nodeæœ€é‡è¦çš„å‡ ä¸ªæ–¹é¢å¸¦é¢†ä½ èµ°ä¸Šæ­£è½¨ï¼Œå¼€å§‹æ„å»ºè‡ªå·±çš„åº”ç”¨ã€‚</p>
<h3 id="æ˜¯ä»€ä¹ˆè®©Nodeæ¯”RailsåŠå…¶ä»–è¯­è¨€æ›´åŠ æµè¡Œï¼Ÿ">æ˜¯ä»€ä¹ˆè®©Nodeæ¯”RailsåŠå…¶ä»–è¯­è¨€æ›´åŠ æµè¡Œï¼Ÿ</h3>
<p>Nodeè‡ªèº«æ„å»ºåœ¨Chromeæœ€å¼ºçš„çš„Javascriptå¼•æ“ï¼Œä½œä¸ºå¼‚æ­¥å¼ã€äº‹ä»¶é©±åŠ¨çš„æ¡†æ¶ï¼Œä¸“ä¸ºå»ºè®¾å¯ä¼¸ç¼©ç½‘ç»œåº”ç”¨è€Œè®¾è®¡ã€‚åŸºæœ¬ä¸Šæ˜¯JavascriptåŠ ä¸€å †C/C++çš„äº’ç›¸ä½œç”¨çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ¥å¯åŠ¨HTTPæˆ–TCPç­‰æœåŠ¡ã€‚</p>
<p>Nodeæ˜¯å•çº¿ç¨‹çš„ï¼Œä½¿ç”¨åŸºäºevent loopçš„å¹¶å‘æ¨¡å‹ã€‚å®ƒæ˜¯éé˜»å¡çš„ï¼Œæ‰€ä»¥å®ƒä¸ä¼šä½¿ç¨‹åºç­‰å¾…ï¼Œè€Œæ˜¯æ³¨å†Œä¸€ä¸ªå›è°ƒå‡½æ•°ä½¿ç¨‹åºç»§ç»­è¿è¡Œã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸ä½¿ç”¨å¤šçº¿ç¨‹ä¹Ÿå¯ä»¥æ“æ§å¼‚æ­¥æ“ä½œã€‚</p>
<p>åœ¨ä¸€äº›é¡ºåºæ‰§è¡Œçš„è¯­è¨€ä¸­å¦‚PHPï¼Œä¸ºäº†è·å–HTMLçš„å†…å®¹ï¼Œä½ ä¼šè¿™ä¹ˆåšï¼š</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="variable">$response</span> = file_get_contents(<span class="string">"http://example.com"</span>);</div><div class="line">print_r(<span class="variable">$response</span>);</div></pre></td></tr></table></figure>

<p>åœ¨Nodeä½ ç”¨å›è°ƒå‡½æ•°å¯ä»¥è¿™ä¹ˆåšï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line">http.request({ hostname: <span class="string">'example.com'</span> }, <span class="function"><span class="keyword">function</span><span class="params">(res)</span> </span>{</div><div class="line">  res.setEncoding(<span class="string">'utf8'</span>);</div><div class="line">  res.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span><span class="params">(chunk)</span> </span>{</div><div class="line">    <span class="built_in">console</span>.log(chunk);</div><div class="line">  });</div><div class="line">}).end();</div></pre></td></tr></table></figure>

<p>åœ¨å®ç°æ–¹é¢æœ‰ä¸¤å¤§ä¸åŒï¼š</p>
<blockquote>
<ul>
<li>Nodeå…è®¸åœ¨ç­‰å¾…å“åº”çš„æ—¶å€™æ‰§è¡Œå…¶ä»–ä»»åŠ¡ã€‚</li>
<li>Nodeåº”ç”¨ç¨‹åºä¸å°†ç¼“å­˜æ–‡ä»¶æ”¾åˆ°å†…å­˜ä¸­ï¼Œä½†å®ƒä¼šå°†æ–‡ä»¶ä¸€éƒ¨åˆ†ä¸€éƒ¨åˆ†çš„è¾“å‡ºã€‚</li>
</ul>
</blockquote>
<p>Nodeå’Œå…¶ä»–event loopé©±åŠ¨çš„ç³»ç»Ÿï¼ˆå¦‚Rubyçš„EventMachine libraryå’ŒPythonçš„Twistedï¼‰æœ‰å¾ˆå¤§çš„ä¸åŒã€‚</p>
<p>Nodeæ‰€æœ‰çš„ç±»åº“å®Œå…¨æ˜¯ä¸ºéé˜»å¡è€Œè®¾è®¡çš„ï¼Œå…¶ä»–çš„å°±ä¸èƒ½è¿™ä¹ˆè¯´äº†ã€‚</p>
<h3 id="ä½¿ç”¨åœºæ™¯">ä½¿ç”¨åœºæ™¯</h3>
<p>Nodeæ˜¯I/Oé™åˆ¶åº”ç”¨ï¼ˆæˆ–ç­‰å¾…ç”¨æˆ·äº‹ä»¶åº”ç”¨ï¼‰çš„ç†æƒ³å¼€å‘å·¥å…·ï¼Œå¯æ˜¯å¹¶ä¸é€‚ç”¨äºå¤§é‡ä½¿ç”¨CPUçš„åº”ç”¨ï¼Œä½†åœ¨æ•°æ®å¯†é›†å‹å®æ—¶åº”ç”¨ï¼ˆDIRTï¼‰ã€å•é¡µåº”ç”¨ã€JSON APIæœåŠ¡å’Œæ•°æ®æµåº”ç”¨ä¸­è¡¨ç°å‡ºè‰²ã€‚</p>
<h3 id="npmï¼Œå®˜æ–¹Node_packageåŒ…ç®¡ç†å·¥å…·">npmï¼Œå®˜æ–¹Node packageåŒ…ç®¡ç†å·¥å…·</h3>
<p>Nodeçš„æˆåŠŸå¾ˆå¤§éƒ¨åˆ†å½’åŠŸäºnpmï¼Œnpmæ˜¯éšNodeä¸€èµ·å®‰è£…çš„packageåŒ…ç®¡ç†å·¥å…·ã€‚npmæœ‰å¾ˆå¤šä¼˜ç‚¹ï¼š</p>
<blockquote>
<ul>
<li>å°†åº”ç”¨ä¾èµ–ç±»åº“å®‰è£…åœ¨é¡¹ç›®ä¸‹ï¼Œè€Œéå…¨å±€å®‰è£…ã€‚</li>
<li>èƒ½åœ¨åŒä¸€æ—¶é—´ç®¡ç†ä¸åŒç‰ˆæœ¬çš„åŒä¸€æ¨¡å—ã€‚</li>
<li>ä½ èƒ½æŒ‡å®šå‹ç¼©åŒ…æˆ–gitä»“åº“æ¥å®‰è£…ã€‚</li>
<li>ä½ èƒ½å¾ˆå®¹æ˜“çš„å‘å¸ƒè‡ªå·±çš„æ¨¡å—åˆ°npmä¸Šã€‚</li>
<li>åœ¨åˆ›å»ºCLIï¼ˆå…¶ä»–äººå¯ä»¥é€šè¿‡npmå®‰è£…å¹¶ä½¿ç”¨ï¼‰åº”ç”¨å¾ˆæœ‰ç”¨ã€‚</li>
</ul>
</blockquote>
<h3 id="èµ„æº">èµ„æº</h3>
<p>æƒ³äº†è§£æ›´å¤šå…³äºä¸ºä»€ä¹ˆç”¨Nodeï¼Œå¯ä»¥è®¿é—®<a href="//www.toptal.com/nodejs/why-the-hell-would-i-use-node-js">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<h2 id="å®‰è£…Node-jså’ŒNPM">å®‰è£…Node.jså’ŒNPM</h2>
<p>åœ¨Windowså’ŒOS Xä¸‹å¯ä»¥é€šè¿‡ä¸“é—¨çš„å®‰è£…åŒ…å®‰è£…ï¼Œç„¶è€Œæœ‰æ—¶å€™ä½ æƒ³åœ¨ä¸åŒç‰ˆæœ¬çš„Nodeä¸Šæµ‹è¯•è‡ªå·±çš„ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨NVMï¼ˆNode Version managerï¼‰ã€‚</p>
<p>é€šè¿‡NVMä½ å¯ä»¥å®‰è£…ä¸åŒç‰ˆæœ¬çš„Nodeåœ¨ä½ çš„æ“ä½œç³»ç»Ÿé‡Œï¼Œå®ç°ä¸åŒç‰ˆæœ¬é—´çš„åˆ‡æ¢ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•åœ¨Ubuntuç³»ç»Ÿä¸‹å®‰è£…NVMã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬è¦ç¡®ä¿æˆ‘ä»¬ç³»ç»Ÿå®‰è£…äº†C++ç¼–è¯‘å™¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">sudo</span> apt-get update</div><div class="line">$ <span class="built_in">sudo</span> apt-get install build-essential libssl-dev</div></pre></td></tr></table></figure>

<p>æ¥ç€æ‹·è´ä¸‹é¢è¿™è¡Œå‘½ä»¤åˆ°æ§åˆ¶å°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ curl https://raw.githubusercontent.com/creationix/nvm/v0.<span class="number">13.1</span>/install.sh | bash</div></pre></td></tr></table></figure>

<p>åœ¨æ­¤NVMåº”è¯¥å°±è¢«æ­£ç¡®å®‰è£…äº†ï¼Œæˆ‘ä»¬ç¡®è®¤ä¸€ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ nvm</div></pre></td></tr></table></figure>

<p>å¦‚æœå½“è¾“å…¥<code>nvm</code>æ—¶æ²¡æœ‰å‡ºç°é”™è¯¯ï¼Œè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥å®‰è£…Nodeå’Œnpmäº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ nvm install v0.<span class="number">10.31</span></div></pre></td></tr></table></figure>

<p>è¾“å‡ºåº”è¯¥æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ nvm install v0.<span class="number">10.31</span></div><div class="line"><span class="comment">################################################################## 100.0%</span></div><div class="line">Now using node v0.<span class="number">10.31</span></div></pre></td></tr></table></figure>

<p>è¿™æ ·nodeå’Œnpméƒ½å¯ä»¥åœ¨æ§åˆ¶å°ä½¿ç”¨äº†ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ node -v && npm -v</div><div class="line">v0.<span class="number">10.31</span></div><div class="line"><span class="number">1.4</span>.<span class="number">23</span></div></pre></td></tr></table></figure>

<p>è¿˜æœ‰æœ€åä¸€ä»¶äº‹æˆ‘ä»¬éœ€è¦åšï¼Œéœ€è¦è®¾ç½®è®¾ç½®é»˜è®¤çš„Nodeç‰ˆæœ¬å½“æˆ‘ä»¬ä¸‹æ¬¡ç™»å½•ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ nvm alias default <span class="number">0.10</span>.<span class="number">31</span></div></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥å®‰è£…å…¶ä»–ç‰ˆæœ¬çš„Nodeå°±åƒæˆ‘ä»¬ä¹‹å‰é‚£æ ·å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨<code>nvm use</code>è¿›è¡Œç‰ˆæœ¬åˆ‡æ¢ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ nvm install v0.<span class="number">8.10</span></div><div class="line">$ nvm use v0.<span class="number">8.10</span></div></pre></td></tr></table></figure>

<p>å¦‚æœä¸çŸ¥é“ä½ åœ¨ç³»ç»Ÿäº†è£…äº†ä»€ä¹ˆç‰ˆæœ¬çš„Nodeï¼Œä½ å¯ä»¥è¾“å…¥<code>nvm list</code>ï¼Œå°†ä»¥åˆ—è¡¨å½¢å¼æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç°åœ¨ç‰ˆæœ¬å’Œé»˜è®¤ç‰ˆæœ¬ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ nvm list</div><div class="line">v0.<span class="number">6.3</span></div><div class="line">v0.<span class="number">6.12</span></div><div class="line">v0.<span class="number">6.14</span></div><div class="line">v0.<span class="number">6.19</span></div><div class="line">v0.<span class="number">7.7</span></div><div class="line">v0.<span class="number">7.8</span></div><div class="line">v0.<span class="number">7.9</span></div><div class="line">v0.<span class="number">8.6</span></div><div class="line">v0.<span class="number">8.11</span></div><div class="line">v0.<span class="number">10.3</span></div><div class="line">v0.<span class="number">10.12</span></div><div class="line">v0.<span class="number">10.15</span></div><div class="line">v0.<span class="number">10.21</span></div><div class="line">v0.<span class="number">10.24</span></div><div class="line">v0.<span class="number">11.9</span></div><div class="line">current: v0.<span class="number">10.24</span></div><div class="line">default -&gt; v0.<span class="number">10.24</span></div></pre></td></tr></table></figure>

<h3 id="èµ„æº-1">èµ„æº</h3>
<p>æƒ³äº†è§£æ›´å¤šå…³äºå¦‚ä½•ç”¨NVMå®‰è£…Nodeï¼Œè¯·è®¿é—®<a href="//www.digitalocean.com/community/tutorials/how-to-install-node-js-with-nvm-node-version-manager-on-a-vps">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<h2 id="NodeåŸºç¡€">NodeåŸºç¡€</h2>
<p>æˆ‘ä»¬å°†çœ‹ä¸‹Node.jsä¸»è¦æ¦‚å¿µï¼š</p>
<blockquote>
<ul>
<li>å¦‚ä½•å¼•å…¥å¤–éƒ¨æ¨¡å—</li>
<li>å›è°ƒå‡½æ•°çš„ä½œç”¨</li>
<li>äº‹ä»¶é©±åŠ¨ï¼ˆEventEmitterï¼‰æ¨¡å¼</li>
<li>æ•°æ®æµ</li>
</ul>
</blockquote>
<h3 id="æ¨¡å—">æ¨¡å—</h3>
<p>Javaå’ŒPythonç”¨<code>import</code>å»åŠ è½½å…¶ä»–æ¨¡å—ï¼ŒPHPå’ŒRubyç”¨<code>require</code>åŠ è½½ã€‚Nodeåœ¨æ¨¡å—ä¸Šå®ç°äº†CommonJSæ¥å£ï¼Œé€šè¿‡<code>require</code>å…³é”®å­—å»åŠ è½½ä¾èµ–æ¨¡å—ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬å¯ä»¥è¿™æ ·åŠ è½½ç³»ç»Ÿæ¨¡å—ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="keyword">var</span> dns = <span class="built_in">require</span>(<span class="string">'dns'</span>);</div></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è¿˜èƒ½åŠ è½½æœ¬åœ°æ–‡ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> myFile = <span class="built_in">require</span>(<span class="string">'./myFile'</span>); <span class="comment">// loads myFile.js</span></div></pre></td></tr></table></figure>

<p>ç”¨é‚£npmå®‰è£…æ¨¡å—ï¼Œå¯åœ¨<a href="//www.npmjs.org/">è¿™ä¸ªç½‘ç«™</a>æˆ–Githubä¸Šæœç´¢ã€‚ä¸‹é¢ä»‹ç»å¦‚ä½•ä¸‹è½½æ¨¡å—åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># where express === module name</span></div><div class="line">$ npm install express</div></pre></td></tr></table></figure>

<p>ä½ èƒ½åœ¨ä»£ç é‡Œå¼•ç”¨npmå®‰è£…çš„æ¨¡å—ï¼Œå’Œå¼•ç”¨ç³»ç»Ÿæ¨¡å—ä¸€æ ·ï¼Œä½ ä¸ç”¨è€ƒè™‘ç»å¯¹å’Œç›¸å¯¹è·¯å¾„ã€‚</p>
<p>æœ‰ä¸€ç‚¹éå¸¸å¥½çš„æ˜¯Nodeæ¨¡å—ä¸ä¼šè‡ªåŠ¨æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼Œç›¸åä½ éœ€è¦ä¸ºæ¨¡å—åˆ†é…ä¸€ä¸ªå˜é‡åï¼Œè¿™æ„å‘³ç€ä½ ä¸ç”¨æ‹…å¿ƒä¸¤ä¸ªæˆ–å¤šä¸ªæ¨¡å—é‡Œçš„å‡½æ•°åç§°å†²çªäº†ã€‚</p>
<p>å½“åˆ›å»ºä½ è‡ªå·±çš„æ¨¡å—ï¼Œåœ¨<code>exports</code>çš„æ—¶å€™éœ€è¦æ³¨æ„ï¼ˆæ— è®ºæ˜¯å‡½æ•°ã€å¯¹è±¡ã€æ•°å­—æˆ–æ˜¯å…¶å®ƒï¼‰ã€‚ä½ è®©<code>exports</code>ç­‰äºä¸€ä¸ªå¯¹è±¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> person = { name: <span class="string">'John'</span>, age: <span class="number">20</span> };</div><div class="line"><span class="built_in">module</span>.exports = person;</div></pre></td></tr></table></figure>

<p>ä¹Ÿå¯ä»¥ç›´æ¥åœ¨<code>exports</code>å¯¹è±¡ä¸Šæ·»åŠ ç›¸åº”çš„å±æ€§æˆ–å‡½æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">exports.name = <span class="string">'John'</span>;</div><div class="line">exports.age = <span class="number">20</span>;</div></pre></td></tr></table></figure>

<p>ä¸åŒçš„æ¨¡å—ä¹‹é—´ä¸å…±äº«ä½œç”¨åŸŸï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³è¦åœ¨ä¸åŒçš„æ¨¡å—ä¹‹é—´å…±äº«å˜é‡ï¼Œä½ å¿…é¡»å¼•å…¥è¿™ä¸ªæ¨¡å—ã€‚å¦ä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯æ¨¡å—åªåŠ è½½ä¸€æ¬¡ï¼Œä¹‹åå°†ç¼“å­˜åˆ°Nodeã€‚</p>
<p>è·Ÿæµè§ˆå™¨ä¸åŒï¼ŒNodeæ²¡æœ‰<code>window</code>å…¨å±€å˜é‡ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªå…¨å±€å˜é‡<code>globals</code>å’Œ<code>process</code>ï¼Œä½ å¿…é¡»é¿å…åœ¨è¿™ä¸¤ä¸ªå…¨å±€å˜é‡æ·»åŠ å±æ€§æˆ–å‡½æ•°ã€‚</p>
<h3 id="å›è°ƒå‡½æ•°">å›è°ƒå‡½æ•°</h3>
<p>åœ¨å¼‚æ­¥ç¼–ç¨‹é‡Œï¼Œå¦‚æœå‡½æ•°æ²¡æœ‰æ‰§è¡Œå®Œæˆæ˜¯ä¸ä¼šè¿”å›å€¼çš„ï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥é‡‡ç”¨<code>continuation-passing style</code>ï¼ˆCPSï¼‰è§£å†³ï¼Œæƒ³äº†è§£æ›´å¤šå…³äºCPSï¼Œç‚¹å‡»<a href="//en.wikipedia.org/wiki/Continuation-passing_style">è¿™é‡Œ</a>ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œä¸€ä¸ªå¼‚æ­¥çš„å‡½æ•°å¯ä»¥è°ƒç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆä¸€èˆ¬æ˜¯ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼‰ï¼Œè¿™æ ·å¦‚æœå¼‚æ­¥å‡½æ•°æ‰§è¡Œå®Œåå°±ä¼šæ‰§è¡Œç›¸åº”çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæŸ¥çœ‹è°·æ­ŒIPv4åœ°å€çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> dns = <span class="built_in">require</span>(<span class="string">'dns'</span>);</div><div class="line">dns.resolve4(<span class="string">'www.google.com'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(err, addresses)</span> </span>{</div><div class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'addresses: '</span> + <span class="built_in">JSON</span>.stringify(addresses));</div><div class="line">});</div></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å†™äº†ä¸ªå›è°ƒå‡½æ•°(é‚£ä¸ªåŒ¿åå‡½æ•°)ä½œä¸º<code>dns.resolve4</code>è¿™ä¸ªå¼‚æ­¥å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ã€‚ä¸€æ—¦å¼‚æ­¥å‡½æ•°<code>dns.resolve4</code>æ‰§è¡Œå®Œæˆäº†å°±ä¼šè°ƒç”¨å›è°ƒå‡½æ•°ï¼Œä»¥æ­¤æ¥ç»§ç»­ç¨‹åºã€‚</p>
<h3 id="äº‹ä»¶">äº‹ä»¶</h3>
<p>è¿™ä¸ªæ ‡å‡†çš„å›è°ƒå‡½æ•°èŒƒå¼å¯¹äºåœ¨å¼‚æ­¥å‡½æ•°æ‰§è¡Œå®Œæˆåéœ€è¦æé†’æƒ…å†µéå¸¸é€‚ç”¨ã€‚ç„¶è€Œï¼Œæœ‰ä¸€äº›æƒ…å†µæ˜¯å¯¹äºä¸åŒäº‹ä»¶éœ€è¦éåŒæ—¶çš„æé†’ï¼š</p>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªè°ƒç”¨IRCå®¢æˆ·ç«¯çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> irc = <span class="built_in">require</span>(<span class="string">'irc'</span>);</div><div class="line"><span class="keyword">var</span> client = <span class="keyword">new</span> irc.Client(<span class="string">'irc.freenode.net'</span>, <span class="string">'myIrcBot'</span>, {</div><div class="line">  channels: [<span class="string">'#sample-channel'</span>]</div><div class="line">});</div><div class="line">client.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(message)</span> </span>{</div><div class="line">  <span class="built_in">console</span>.error(<span class="string">'error: '</span>, message);</div><div class="line">});</div><div class="line">client.on(<span class="string">'connect'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'connected to the irc server'</span>);</div><div class="line">});</div><div class="line">client.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(from, to, message)</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(from + <span class="string">' =&gt; '</span> + to + <span class="string">': '</span> + message);</div><div class="line">});</div><div class="line">client.on(<span class="string">'pm'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(from, message)</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(from + <span class="string">' =&gt; ME: '</span> + message);</div><div class="line">});</div></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬ç›‘å¬ä¸åŒçš„äº‹ä»¶ï¼š</p>
<blockquote>
<ul>
<li><code>connect</code>äº‹ä»¶ï¼Œå½“å®¢æˆ·ç«¯å’ŒIRCæœåŠ¡ç«¯è¿æ¥æˆåŠŸæ—¶å€™è§¦å‘ã€‚</li>
<li><code>error</code>äº‹ä»¶ï¼Œå½“å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</li>
<li>å½“ä¿¡æ¯æ¥ä¸´æ—¶è§¦å‘<code>message</code>å’Œ<code>pm</code>äº‹ä»¶ã€‚</li>
</ul>
</blockquote>
<p>ä¸Šé¢æåˆ°çš„äº‹ä»¶è®©ä½¿ç”¨<code>EventEmitter</code>æ¨¡å¼æ›´åŠ ç†æƒ³äº†ã€‚</p>
<p><code>EventEmitter</code>æ¨¡å¼å®ç°äº†ç”¨æˆ·å¯ä»¥è®¢é˜…ä»–ä»¬å–œæ¬¢çš„äº‹ä»¶ã€‚è¿™ç§æ¨¡å¼å¯èƒ½ä½ åœ¨æµè§ˆå™¨é‚£å·²ç»å¾ˆç†Ÿæ‚‰äº†ï¼Œç»å¸¸ç”¨äºç»‘å®šDOMäº‹ä»¶ã€‚</p>
<p>Nodeçš„æ ¸å¿ƒé‡Œæœ‰ä¸€ä¸ª<code>EventEmitter</code>ç±»ï¼Œè®©æˆ‘ä»¬åˆ›é€ è‡ªå·±çš„<code>EventEmitter</code>å¯¹è±¡ã€‚ç°åœ¨æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç»§æ‰¿<code>EventEmitter</code>çš„<code>MemoryWatcher</code>ç±»ï¼Œå†ç»‘å®šä¸¤ä¸ªäº‹ä»¶ï¼š</p>
<ul>
<li>å®šæœŸçš„<code>data</code>äº‹ä»¶ï¼Œè¡¨ç¤ºå†…å­˜ä½¿ç”¨é‡</li>
<li><code>error</code>äº‹ä»¶ï¼Œé˜²æ­¢å†…å­˜ä½¿ç”¨è¶…å‡ºé™åˆ¶</li>
</ul>
<p><code>MemoryWatcher</code>ç±»å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>).EventEmitter;</div><div class="line"><span class="keyword">var</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MemoryWatcher</span><span class="params">(opts)</span> </span>{</div><div class="line">  <span class="keyword">if</span> (!(<span class="keyword">this</span> <span class="keyword">instanceof</span> MemoryWatcher)) {</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> MemoryWatcher();</div><div class="line">  }</div><div class="line">  opts = opts || {</div><div class="line">    frequency: <span class="number">30000</span> <span class="comment">// 30 seconds</span></div><div class="line">  };</div><div class="line">  EventEmitter.call(<span class="keyword">this</span>);</div><div class="line">  <span class="keyword">var</span> that = <span class="keyword">this</span>;</div><div class="line">  setInterval(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="keyword">var</span> bytes = process.memoryUsage().rss;</div><div class="line">    <span class="keyword">if</span> (opts.maxBytes && bytes &gt; opts.maxBytes) {</div><div class="line">      that.emit(<span class="string">'error'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Memory exceeded '</span> + opts.maxBytes + <span class="string">' bytes'</span>));</div><div class="line">    }<span class="keyword">else</span> {</div><div class="line">      that.emit(<span class="string">'data'</span>, bytes);</div><div class="line">    }</div><div class="line">  }, opts.frequency);</div><div class="line">}</div><div class="line">util.inherits(MemoryWatcher, EventEmitter);</div></pre></td></tr></table></figure>

<p>ä½¿ç”¨éå¸¸ç®€å•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mem = <span class="keyword">new</span> MemoryWatcher({</div><div class="line">  maxBytes: <span class="number">12455936</span>,</div><div class="line">  frequency: <span class="number">5000</span></div><div class="line">});</div><div class="line">mem.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span><span class="params">(bytes)</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(bytes);</div><div class="line">});</div><div class="line">mem.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(err)</span> </span>{</div><div class="line">  <span class="keyword">throw</span> err;</div><div class="line">});</div></pre></td></tr></table></figure>

<p>ä¸€ä¸ªæ›´ç®€å•çš„åˆ›é€ <code>EventEmitter</code>å¯¹è±¡æ–¹å¼æ˜¯åˆ›å»ºä¸€ä¸ª<code>EventEmitter</code>çš„æ–°å¯¹è±¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>).EventEmitter;</div><div class="line"><span class="keyword">var</span> emitter = <span class="keyword">new</span> EventEmitter();</div><div class="line">setInterval(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="built_in">console</span>.log(process.memoryUsage().rss);</div><div class="line">}, <span class="number">30000</span>);</div></pre></td></tr></table></figure>

<h3 id="æ•°æ®æµ">æ•°æ®æµ</h3>
<p>æµæ˜¯å¼‚æ­¥åœ°æ“çºµæ•°æ®æµçš„ä¸€ä¸ªæŠ½è±¡çš„æ¥å£ï¼Œå®ƒä»¬å’ŒUnixçš„ç®¡é“å‘½ä»¤å¾ˆç›¸ä¼¼ï¼Œå¯ä»¥åˆ†ä¸ºäº”ç±»ï¼šå¯è¯»ã€å¯å†™ã€è½¬æ¢ã€åŒå‘å’Œç»å…¸ã€‚</p>
<p>å’ŒUnixç®¡é“å‘½ä»¤ä¸€æ ·ï¼ŒNodeæ•°æ®æµä¹Ÿå®ç°äº†<code>.pipe()</code>æ¥å£ã€‚æ•°æ®æµæœ€æ£’çš„åœ°æ–¹æ˜¯ä½ ä¸éœ€è¦å°†æ‰€æœ‰æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œå®ƒä»¬å°±å¯ä»¥å¾ˆå¥½çš„ç»“åˆåœ¨ä¸€èµ·ã€‚</p>
<p>ä¸ºäº†æ›´å¥½çš„ç†è§£æ•°æ®æµæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå¯ä»¥è¯»å–æ•°æ®çš„åº”ç”¨ï¼Œç”¨AES-256ç®—æ³•åŠ å¯†æ•°æ®ï¼Œç”¨gzipå‹ç¼©æ•°æ®ã€‚æ‰€æœ‰éƒ½æ˜¯ä½¿ç”¨æ•°æ®æµçš„ï¼Œè¿™æ„å‘³ç€æ¯è¯»ä¸€å—æ•°æ®æˆ‘ä»¬éƒ½å°†å®ƒåŠ å¯†å’Œå‹ç¼©ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> crypto = <span class="built_in">require</span>(<span class="string">'crypto'</span>);</div><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"><span class="keyword">var</span> zlib = <span class="built_in">require</span>(<span class="string">'zlib'</span>);</div><div class="line"><span class="keyword">var</span> password = <span class="keyword">new</span> Buffer(process.env.PASS || <span class="string">'password'</span>);</div><div class="line"><span class="keyword">var</span> encryptStream = crypto.createCipher(<span class="string">'aes-256-cbc'</span>, password);</div><div class="line"><span class="keyword">var</span> gzip = zlib.createGzip();</div><div class="line"><span class="keyword">var</span> readStream = fs.createReadStream(filename); <span class="comment">// current file</span></div><div class="line"><span class="keyword">var</span> writeStream = fs.createWriteStream(dirname + <span class="string">'/out.gz'</span>);</div><div class="line">readStream <span class="comment">// reads current file</span></div><div class="line">  .pipe(encryptStream) <span class="comment">// encrypts</span></div><div class="line">  .pipe(gzip) <span class="comment">// compresses</span></div><div class="line">  .pipe(writeStream) <span class="comment">// writes to out file</span></div><div class="line">  .on(<span class="string">'finish'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">    <span class="comment">// all done</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'done'</span>);</div><div class="line">  });</div></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å¯è¯»æµï¼Œå°†å®ƒå¯¼å…¥åˆ°åŠ å¯†æµï¼Œå†å¯¼å…¥åˆ°gzipå‹ç¼©æµï¼Œæœ€åå¯¼å…¥åˆ°è¾“å‡ºæµï¼ˆå°†å†…å®¹æ˜¾ç¤ºåˆ°å±å¹•ä¸Šï¼‰ã€‚åŠ å¯†æµå’Œå‹ç¼©æµå±äºè½¬æ¢æµï¼Œå®ƒè¡¨ç¤ºå°†è¾“å…¥æ•°æ®ä»¥æŸç§æ–¹å¼è®¡ç®—å¤„ç†åè¾“å‡ºæ•°æ®ã€‚</p>
<p>åº”ç”¨è¿è¡Œåä¼šç”Ÿæˆä¸€ä¸ª<code>out.gz</code>çš„æ–‡ä»¶ã€‚ç°åœ¨æˆ‘ä»¬æ¥è§£å¯†è¿™ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†å†…å®¹è¾“å‡ºåˆ°æ§åˆ¶å°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> crypto = <span class="built_in">require</span>(<span class="string">'crypto'</span>);</div><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"><span class="keyword">var</span> zlib = <span class="built_in">require</span>(<span class="string">'zlib'</span>);</div><div class="line"><span class="keyword">var</span> password = <span class="keyword">new</span> Buffer(process.env.PASS || <span class="string">'password'</span>);</div><div class="line"><span class="keyword">var</span> decryptStream = crypto.createDecipher(<span class="string">'aes-256-cbc'</span>, password);</div><div class="line"><span class="keyword">var</span> gzip = zlib.createGunzip();</div><div class="line"><span class="keyword">var</span> readStream = fs.createReadStream(__dirname + <span class="string">'/out.gz'</span>);</div><div class="line">readStream <span class="comment">// reads current file</span></div><div class="line">  .pipe(gzip) <span class="comment">// uncompresses</span></div><div class="line">  .pipe(decryptStream) <span class="comment">// decrypts</span></div><div class="line">  .pipe(process.stdout) <span class="comment">// writes to terminal</span></div><div class="line">  .on(<span class="string">'finish'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">    <span class="comment">// finished</span></div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'done'</span>);</div><div class="line">  });</div></pre></td></tr></table></figure>

<h3 id="èµ„æº-2">èµ„æº</h3>
<p>æƒ³äº†è§£æ›´å¤šå…³äºNodeåŸºç¡€ï¼Œå¯ä»¥è®¿é—®<a href="//webapplog.com/node-js-fundamentals-a-concise-overview-of-the-main-concepts/">è¿™é‡Œ</a>ã€‚æ›´æ·±å…¥çš„äº†è§£æ•°æ®æµï¼Œè¯·ç‚¹å‡»<a href="//github.com/substack/stream-handbook">æ•°æ®æµæ‰‹å†Œ</a>ã€‚</p>
<h2 id="é”™è¯¯å¤„ç†">é”™è¯¯å¤„ç†</h2>
<p>é”™è¯¯å¤„ç†æ˜¯Nodeæœ€é‡è¦çš„ä¸»é¢˜ä¹‹ä¸€ã€‚å¦‚æœå¿½ç•¥æˆ–è€…å¤„ç†ä¸å½“ï¼Œä½ çš„æ•´ä¸ªåº”ç”¨å°†å´©æºƒæˆ–å¤„äºä¸ä¸€è‡´çš„çŠ¶æ€ã€‚</p>
<h3 id="Error-firstå›è°ƒå‡½æ•°">Error-firstå›è°ƒå‡½æ•°</h3>
<p><code>error-first</code>å›è°ƒå‡½æ•°æ˜¯Nodeå›è°ƒå‡½æ•°çš„ä¸€ä¸ªæ ‡å‡†åè®®ï¼Œå®ƒèµ·æºäºNodeæ ¸å¿ƒï¼Œåæ¥è¢«ç”¨æˆ·æ¥å—åŒæ—¶æˆä¸ºä»Šå¤©çš„æ ‡å‡†ã€‚è¿™æ˜¯ä¸ªå¾ˆç®€å•çš„è§„å®šï¼Œåªæœ‰ä¸€æ¡è§„åˆ™ï¼šå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å¿…é¡»æ˜¯<code>error</code>å¯¹è±¡ã€‚</p>
<p>è¿™å°±æ„å‘³ç€å¯èƒ½å‡ºç°ä¸¤ç§åœºæ™¯ï¼š</p>
<ul>
<li>å¦‚æœerrorå‚æ•°æ˜¯ç©ºï¼Œåˆ™æ“ä½œæˆåŠŸã€‚</li>
<li>å¦‚æœerrorå‚æ•°ä¸ä¸ºç©ºï¼Œåˆ™æŠ¥é”™å¹¶éœ€è¦ä½ çš„å¤„ç†</li>
</ul>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦‚ä½•ç”¨Nodeè¯»å–æ–‡ä»¶å†…å®¹çš„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">fs.readFile(<span class="string">'/foo.txt'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(err, data)</span> </span>{</div><div class="line">  <span class="comment">// ...</span></div><div class="line">});</div></pre></td></tr></table></figure>

<p><code>fs.readFile</code>çš„å›è°ƒå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼šerrorå¯¹è±¡å’Œæ–‡ä»¶å†…å®¹ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç›¸ä¼¼çš„å‡½æ•°ï¼Œä½¿å¾—å¯ä»¥è¯»å–å¤šä¸ªæ–‡ä»¶çš„æ•°æ®ï¼Œé€šè¿‡ä¸€ä¸ªæ•°ç»„ä¼ é€’å‚æ•°ã€‚ç‰¹å¾å’Œä¹‹å‰çš„ä¸€æ ·ï¼Œåªä¸è¿‡æŠŠå•ä¸€æ–‡ä»¶è·¯å¾„å‚æ•°æ”¹æˆä¸€ä¸ªæ•°ç»„ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">readFiles(filesArray, callback);</div></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°Šé‡<code>error-first</code>æ¨¡å¼ä¸ä¼šåœ¨<code>readFiles</code>å‡½æ•°é‡Œé¢å¤„ç†é”™è¯¯ï¼Œä¸è¿‡ä¼šå°†è¿™ä»»åŠ¡è½¬äº¤ç»™å›è°ƒå‡½æ•°ã€‚<code>readFiles</code>å‡½æ•°ä¼šéå†æ–‡ä»¶è·¯å¾„æ•°ç»„ï¼Œå¹¶è¯»å–æ•°æ®ã€‚å¦‚æœé‡åˆ°é”™è¯¯ï¼Œå®ƒå°†è°ƒç”¨å›è°ƒå‡½æ•°ï¼Œæœ‰ä¸”åªè°ƒç”¨ä¸€æ¬¡ã€‚å½“å®Œæˆè¯»å–æ•°ç»„é‡Œæœ€åä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹æ—¶ï¼Œå°†è°ƒç”¨å›è°ƒå‡½æ•°å¹¶å°†<code>null</code>ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFiles</span><span class="params">(files, callback)</span> </span>{</div><div class="line">  <span class="keyword">var</span> filesLeft = files.length;</div><div class="line">  <span class="keyword">var</span> contents = {};</div><div class="line">  <span class="keyword">var</span> error = <span class="literal">null</span>;</div><div class="line">  <span class="keyword">var</span> processContent = <span class="function"><span class="keyword">function</span><span class="params">(filePath)</span> </span>{</div><div class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span><span class="params">(err, data)</span> </span>{</div><div class="line">      <span class="comment">// an error was previously encountered and the callback was invoked</span></div><div class="line">      <span class="keyword">if</span> (error !== <span class="literal">null</span>) { <span class="keyword">return</span>; }</div><div class="line">      <span class="comment">// an error happen while trying to read the file, so invoke the callback</span></div><div class="line">      <span class="keyword">if</span> (err) {</div><div class="line">        error = err;</div><div class="line">        <span class="keyword">return</span> callback(err);</div><div class="line">      }</div><div class="line">      contents[filePath] = data;</div><div class="line">      <span class="comment">// after the last file read was executed, invoke the callback</span></div><div class="line">      <span class="keyword">if</span> (!--filesLeft) {</div><div class="line">        callback(<span class="literal">null</span>, contents);</div><div class="line">      }</div><div class="line">    };</div><div class="line">  };</div><div class="line">  files.forEach(<span class="function"><span class="keyword">function</span><span class="params">(filePath)</span> </span>{</div><div class="line">    fs.readFile(filePath, processContent(filePath));</div><div class="line">  });</div><div class="line">}</div></pre></td></tr></table></figure>

<h3 id="EventEmitteré”™è¯¯">EventEmitteré”™è¯¯</h3>
<p>æˆ‘ä»¬è¦å°å¿ƒå¤„ç†<code>EventEmitter</code>ï¼ˆæ•°æ®æµä¹Ÿä¸€æ ·ï¼‰ï¼Œå› ä¸ºå¦‚æœæœ‰æœªå¤„ç†çš„é”™è¯¯äº‹ä»¶å°†å¯¼è‡´æˆ‘ä»¬çš„åº”ç”¨å´©æºƒã€‚è¿™æ˜¯æœ€ç®€å•çš„ä¾‹å­ï¼Œç”±æˆ‘ä»¬è‡ªå·±è§¦å‘é”™è¯¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> EventEmitter = <span class="built_in">require</span>(<span class="string">'events'</span>).EventEmitter;</div><div class="line"><span class="keyword">var</span> emitter = <span class="keyword">new</span> EventEmitter();</div><div class="line">emitter.emit(<span class="string">'error'</span>, <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'something bad happened'</span>));</div></pre></td></tr></table></figure>

<p>ç”±ä½ çš„åº”ç”¨å†³å®šï¼Œå¯ä»¥æ˜¯ä¸ªä¸¥é‡çš„é”™è¯¯ï¼ˆéš¾ä»¥å‘ç°ï¼‰æˆ–ä¸ä¼šä½¿ä½ çš„åº”ç”¨å´©æºƒçš„é”™è¯¯ï¼ˆå¦‚å¤±è´¥æ—¶å‘é€ä¸€ä¸ªä¿¡æ¯ï¼‰ã€‚æ— è®ºå¦‚ä½•éƒ½è¦ç»‘å®šä¸€ä¸ª<code>error</code>äº‹ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">emitter.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span><span class="params">(err)</span> </span>{</div><div class="line">  <span class="built_in">console</span>.error(<span class="string">'something went wrong with the ee:'</span> + err.message);</div><div class="line">});</div></pre></td></tr></table></figure>

<h3 id="ç”¨verroræ¨¡å—ä¼ é€’æ›´å…·æè¿°æ€§çš„é”™è¯¯">ç”¨verroræ¨¡å—ä¼ é€’æ›´å…·æè¿°æ€§çš„é”™è¯¯</h3>
<p>æœ‰å¾ˆå¤šç§æƒ…å†µæ˜¯éœ€è¦æˆ‘ä»¬å°†é”™è¯¯æŒ‡æ´¾ç»™å›è°ƒå‡½æ•°ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸Šé¢å†™<code>readFiles</code>å‡½æ•°çš„æ—¶å€™åšè¿‡è¿™æ ·çš„äº‹ã€‚å¯æ˜¯åœ¨è¯»å–æ–‡ä»¶çš„æ—¶å€™å‘ç°é”™è¯¯æˆ‘ä»¬åªè¦æŒ‡æ´¾ç»™å›è°ƒå‡½æ•°å—ï¼Ÿ</p>
<p>è®©æˆ‘ä»¬è¯•ç€è¯»å–ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">readFiles([<span class="string">'non-existing-file'</span>], <span class="function"><span class="keyword">function</span><span class="params">(err, contents)</span> </span>{</div><div class="line">  <span class="keyword">if</span> (err) { <span class="keyword">throw</span> err; }</div><div class="line">  <span class="built_in">console</span>.log(contents);</div><div class="line">});</div></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä¾‹å­è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ node <span class="built_in">read</span>Files.js</div><div class="line">/Users/alexandruvladutu/www/airpair-article/examples/<span class="built_in">read</span>Files.js:<span class="number">34</span></div><div class="line">  <span class="keyword">if</span> (err) { throw err; }</div><div class="line">                    ^</div><div class="line">Error: ENOENT, open <span class="string">'/Users/alexandruvladutu/www/airpair-article/examples/non-existing-file'</span></div></pre></td></tr></table></figure>

<p>è¿™é”™è¯¯æç¤ºå¹¶ä¸æ˜¯é‚£ä¹ˆç†æƒ³ï¼Œå› ä¸ºåœ¨ç°å®å½“ä¸­çš„æƒ…å†µå¯èƒ½æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°å†è°ƒç”¨åŸæ¥çš„å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä½ æˆ–è®¸æœ‰ä¸ªå‡½æ•°å«<code>readMarkdownFiles</code>ï¼Œå®ƒä¼šè°ƒç”¨<code>readFiles</code>å»è¯»å–markdownæ–‡ä»¶ã€‚</p>
<p>ä¸Šé¢è¾“å‡ºçš„é”™è¯¯è¿½è¸ªå¹¶ä¸æ˜¯é‚£ä¹ˆçš„æœ‰ç”¨ï¼Œæ‰€ä»¥ä½ è¿˜è¦æ·±åº¦çš„æŒ–æ˜é”™è¯¯çš„æ¥æºã€‚å¹¸è¿çš„æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ•´åˆ<code>verror</code>æ¨¡å—åˆ°åº”ç”¨ä¸­æ¥è§£å†³è¿™æ ·çš„é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨æ–¹æ³•å°±æ˜¯å¼•å…¥<code>verror</code>æ¨¡å—ï¼Œåœ¨è°ƒç”¨å›è°ƒå‡½æ•°æ—¶ç”¨<code>verror</code>å¯¹è±¡åŒ…ä½æˆ‘ä»¬çš„<code>error</code>å¯¹è±¡å¹¶æä¾›æ›´å¤šçš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> verror = <span class="built_in">require</span>(<span class="string">'verror'</span>);</div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFiles</span><span class="params">(files, callback)</span> </span>{</div><div class="line">  ...</div><div class="line">  <span class="keyword">return</span> callback(<span class="keyword">new</span> VError(err, <span class="string">'failed to read file %s'</span>, filePath));</div><div class="line">  ...</div><div class="line">}</div></pre></td></tr></table></figure>

<p>è®©æˆ‘ä»¬çœ‹çœ‹è¾“å‡ºç»“æœï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ node <span class="built_in">read</span>Files-verror.js</div><div class="line">/Users/alexandruvladutu/www/airpair-article/examples/<span class="built_in">read</span>Files-verror.js:<span class="number">35</span></div><div class="line">  <span class="keyword">if</span> (err) { throw err; }</div><div class="line">                    ^</div><div class="line">VError: failed to <span class="built_in">read</span> file /Users/alexandruvladutu/www/airpair-article/examples/non-existing-file: ENOENT, open <span class="string">'/Users/alexandruvladutu/www/airpair-article/examples/non-existing-file'</span></div><div class="line">  at /Users/alexandruvladutu/www/airpair-article/examples/<span class="built_in">read</span>Files-verror.js:<span class="number">17</span>:<span class="number">25</span></div><div class="line">  at fs.js:<span class="number">207</span>:<span class="number">20</span></div><div class="line">  at Object.oncomplete (fs.js:<span class="number">107</span>:<span class="number">15</span>)</div></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬çŸ¥é“åœ¨è¯»å–æ–‡ä»¶ä¸Šå‡ºç°é”™è¯¯ï¼Œå¹¶ä¸”çŸ¥é“é”™è¯¯æ¥è‡ª<code>readFiles</code>å‡½æ•°ã€‚</p>
<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œä½†å±•ç¤ºäº†<code>verror</code>çš„å¼ºå¤§ã€‚åœ¨æˆ‘ä»¬çš„äº§å“ä¸­ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºä»£ç åº“å¯èƒ½éå¸¸å¤§ï¼Œé”™è¯¯æºå¯èƒ½æ¯”æˆ‘ä»¬çš„ä¾‹å­è—å¾—æ›´æ·±ã€‚</p>
<h3 id="èµ„æº-3">èµ„æº</h3>
<p>æƒ³äº†è§£æ›´å¤šï¼Œå¯ä»¥è®¿é—®<a href="//www.joyent.com/developers/node/design/errors">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<h2 id="ä½¿ç”¨node-inspectorè°ƒè¯•Nodeåº”ç”¨">ä½¿ç”¨node-inspectorè°ƒè¯•Nodeåº”ç”¨</h2>
<p>å¾ˆå¤šå°çš„é”™è¯¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>console.log</code>å»è¿½è¸ªï¼Œä½†æ˜¯æ›´å¤æ‚çš„é”™è¯¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="//github.com/node-inspector/node-inspector">node-inspector</a>ï¼Œå®ƒæœ‰å¾ˆå¤šå¾ˆå¸å¼•äººçš„ç‰¹æ€§ï¼Œä½†æœ€é‡è¦çš„è¿˜æ˜¯ï¼š</p>
<ul>
<li>å®ƒæ˜¯åŸºäºBlinkå¼€å‘è€…å·¥å…·çš„ï¼Œæ‰€ä»¥å®ƒç”¨èµ·æ¥åƒå‰ç«¯å¼€å‘å·¥å…·ã€‚</li>
<li>å®ƒå¯ä»¥è®¾ç½®æ–­ç‚¹ã€‚</li>
<li>æˆ‘ä»¬èƒ½step overã€step inã€step outå’Œresume(ç»§ç»­)ã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥æ£€æµ‹ä½œç”¨åŸŸã€å˜é‡ã€å¯¹è±¡å±æ€§ã€‚</li>
<li>é™¤äº†æ£€æµ‹ï¼Œæˆ‘ä»¬è¿˜èƒ½ä¿®æ”¹å˜é‡ã€å¯¹è±¡å±æ€§ã€‚</li>
</ul>
<p>é€šè¿‡npmå®‰è£…ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g node-inspector</div></pre></td></tr></table></figure>

<p>è®©æˆ‘ä»¬æ¥å†™ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line"><span class="keyword">var</span> port = process.env.PORT || <span class="number">1337</span>;</div><div class="line">http.createServer(<span class="function"><span class="keyword">function</span><span class="params">(req, res)</span> </span>{</div><div class="line">  res.writeHead(<span class="number">200</span>, { <span class="string">'Content-Type'</span>: <span class="string">'text/html'</span> });</div><div class="line">  res.end(<span class="keyword">new</span> <span class="built_in">Date</span>() + <span class="string">'\n'</span>);</div><div class="line">}).listen(port);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'Server running on port %s'</span>, port);</div></pre></td></tr></table></figure>

<p>ä¸ºäº†è°ƒè¯•æˆ‘ä»¬çš„ä¾‹å­ï¼Œæˆ‘ä»¬è¦è¾“å…¥ä¸‹é¢è¿™è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># basically `node-debug` instead of `node`</span></div><div class="line">$ node-debug example.js</div></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸ä»…è®©æˆ‘ä»¬çš„åº”ç”¨è·‘èµ·æ¥ï¼Œè€Œä¸”è¿˜ä¼šåœ¨Chromeé‡Œé¢æ‰“å¼€node-inspectoré¢æ¿ã€‚è®©æˆ‘ä»¬åœ¨è¯·æ±‚ä¸Šè®¾ç½®ä¸€ä¸ªæ–­ç‚¹ï¼ˆé€šè¿‡ç‚¹å‡»è¾¹ç¼˜ä¸Šçš„æ•°å­—ï¼‰ã€‚ç°åœ¨è®©æˆ‘ä»¬æ‰“å¼€å¦ä¸€ä¸ªçª—å£ï¼Œè®¿é—®<a href="//localhost:1337">http://localhost:1337</a>ã€‚æµè§ˆå™¨ä¼šå‡ºç°åŠ è½½çš„çŠ¶æ€ï¼Œä½†æ‰“å¼€node-inspectoré¢æ¿çœ‹çœ‹ï¼š</p>
<p><img src="/img/node/img-2.jpg" alt="node-inspector"></p>
<p>å¦‚æœä½ æ‰“å¼€consoleé€‰å¡ï¼Œä½ èƒ½æ£€æµ‹<code>request</code>å’Œ<code>response</code>å¯¹è±¡ï¼Œè¿˜èƒ½ä¿®æ”¹ä»–ä»¬ç­‰ç­‰ã€‚è¿™åªæ˜¯node-inspectorå…¥é—¨çš„ä¸€ä¸ªå¾ˆç®€å•çš„ä¾‹å­ï¼Œä½†åœ¨å®é™…è¿ç”¨å½“ä¸­é€šè¿‡è¿™æ ·çš„è°ƒè¯•æ–¹å¼å¯ä»¥è§£å†³æ›´å¤æ‚çš„é”™è¯¯é—®é¢˜ã€‚</p>
<h3 id="èµ„æº-4">èµ„æº</h3>
<p>æƒ³äº†è§£æ›´å¤šå…³äºè°ƒè¯•çš„ä¸œè¥¿ï¼Œå¯ä»¥è®¿é—®<a href="//blog.nodeknockout.com/post/34843655876/debugging-with-node-inspector">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<h2 id="ç”¨Expresså’ŒSocket-IOåˆ›å»ºä¸€ä¸ªå®æ—¶åº”ç”¨">ç”¨Expresså’ŒSocket.IOåˆ›å»ºä¸€ä¸ªå®æ—¶åº”ç”¨</h2>
<p><code>Express</code>æ˜¯Nodeæœ€æµè¡Œçš„æ¡†æ¶ï¼Œä¸”<code>Socket.IO</code>æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯åŒå‘å®æ—¶é€šä¿¡çš„æ¡†æ¶ã€‚æ‰€ä»¥æˆ‘ä»¬è¦ç”¨ä¸Šé¢ä¸¤ä¸ªæ¡†æ¶åˆ›å»ºä¸€ä¸ªç®€å•çš„åƒç´ è·Ÿè¸ªåº”ç”¨ï¼Œå…·æœ‰æ˜¾ç¤ºæ¿å¹¶ä¸”å¯ä»¥å®æ—¶æ˜¾ç¤ºè®¿é—®è€…ã€‚</p>
<p>é™¤äº†<code>Express</code>å’Œ<code>Socket.IO</code>æ¨¡å—ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å®‰è£…<code>emptygif</code>æ¨¡å—ã€‚å½“ç”¨æˆ·è®¿é—®<a href="//localhost:1337/tpx.gif">http://localhost:1337/tpx.gif</a>ï¼Œæ­£åœ¨è®¿é—®zh<a href="//localhost:1337/">é¦–é¡µ</a>çš„ç”¨æˆ·ä¼šæ”¶åˆ°ä¸€æ¡ä¿¡æ¯ï¼Œè¿™æ¡ä¿¡æ¯ä¸å®¢æˆ·ç«¯ç›¸å…³ï¼ŒåŒ…æ‹¬IPåœ°å€å’Œæµè§ˆå™¨å¼•æ“ã€‚</p>
<p>ä¸‹é¢æ˜¯<code>server.js</code>æ–‡ä»¶çš„ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> emptygif = <span class="built_in">require</span>(<span class="string">'emptygif'</span>);</div><div class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"><span class="keyword">var</span> app = express();</div><div class="line"><span class="keyword">var</span> server = <span class="built_in">require</span>(<span class="string">'http'</span>).createServer(app);</div><div class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">'socket.io'</span>)(server);</div><div class="line">app.get(<span class="string">'/tpx.gif'</span>, <span class="function"><span class="keyword">function</span><span class="params">(req, res, next)</span> </span>{</div><div class="line">  io.emit(<span class="string">'visit'</span>, {</div><div class="line">    ip: req.ip,</div><div class="line">    ua: req.headers[<span class="string">'user-agent'</span>]</div><div class="line">  });</div><div class="line">  emptygif.sendEmptyGif(req, res, {</div><div class="line">    <span class="string">'Content-Type'</span>: <span class="string">'image/gif'</span>,</div><div class="line">    <span class="string">'Content-Length'</span>: emptygif.emptyGifBufferLength,</div><div class="line">    <span class="string">'Cache-Control'</span>: <span class="string">'public, max-age=0'</span> <span class="comment">// or specify expiry to make sure it will call everytime</span></div><div class="line">  });</div><div class="line">});</div><div class="line">app.use(express.static(__dirname + <span class="string">'/public'</span>));</div><div class="line">server.listen(<span class="number">1337</span>);</div></pre></td></tr></table></figure>

<p>åœ¨å‰ç«¯æˆ‘ä»¬åªè¦ç›‘å¬ç”±æœåŠ¡ç«¯å‘å‡ºçš„<code>visit</code>äº‹ä»¶ï¼Œä¿®æ”¹ç›¸åº”çš„UIï¼š</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line"><span class="doctype">&lt;!DOCTYPE HTML&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">html</span> <span class="attribute">lang</span>=<span class="value">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">meta</span> <span class="attribute">charset</span>=<span class="value">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">title</span>&gt;</span>Realtime pixel tracking dashboard<span class="tag">&lt;/<span class="title">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">style</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="class">.visit</span> <span class="rules">{</span></div><div class="line">      <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">5px</span> <span class="number">0</span></span></span>;</div><div class="line">      <span class="rule"><span class="attribute">border-bottom</span>:<span class="value"> <span class="number">1px</span> dotted <span class="hexcolor">#CCC</span></span></span>;</div><div class="line">      <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">5px</span> <span class="number">0</span></span></span>;</div><div class="line">    <span class="rule">}</span></div><div class="line">    <span class="class">.ip</span> <span class="rules">{</span></div><div class="line">      <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span> <span class="number">10px</span></span></span>;</div><div class="line">      <span class="rule"><span class="attribute">border-left</span>:<span class="value"> <span class="number">1px</span> dotted <span class="hexcolor">#CCC</span></span></span>;</div><div class="line">      <span class="rule"><span class="attribute">border-right</span>:<span class="value"> <span class="number">1px</span> dotted <span class="hexcolor">#CCC</span></span></span>;</div><div class="line">      <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">0</span> <span class="number">5px</span></span></span>;</div><div class="line">    <span class="rule">}</span></div><div class="line">  <span class="tag">&lt;/<span class="title">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">h1</span>&gt;</span>Realtime pixel tracking dashboard<span class="tag">&lt;/<span class="title">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"visits"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"https://code.jquery.com/jquery-1.10.2.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.8.1/moment.min.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"/socket.io/socket.io.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></div><div class="line">  $(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="keyword">var</span> socket = io();</div><div class="line">    <span class="keyword">var</span> containerEl = $(<span class="string">'.visits'</span>);</div><div class="line">    socket.on(<span class="string">'visit'</span>, <span class="function"><span class="keyword">function</span><span class="params">(visit)</span> </span>{</div><div class="line">      <span class="keyword">var</span> newItem = <span class="string">'&lt;div class="visit"&gt;'</span>;</div><div class="line">          newItem += <span class="string">'&lt;span class="date"&gt;'</span> + moment().format(<span class="string">'MMMM Do YYYY, HH:mm:ss'</span>) + <span class="string">'&lt;/span&gt;'</span>;</div><div class="line">          newItem += <span class="string">'&lt;span class="ip"&gt;'</span> + visit.ip + <span class="string">'&lt;/span&gt;'</span>;</div><div class="line">          newItem += <span class="string">'&lt;span class="ua"&gt;'</span> + visit.ua + <span class="string">'&lt;/span&gt;&lt;/div&gt;'</span>;</div><div class="line">          containerEl.append(newItem);</div><div class="line">    });</div><div class="line">  });</div><div class="line">  <span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">html</span>&gt;</span></div></pre></td></tr></table></figure>

<p>ç°åœ¨è®©æˆ‘ä»¬å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œæ‰“å¼€æ˜¾ç¤ºæ¿ï¼Œç”¨ä¸åŒçš„æµè§ˆå™¨æ‰“å¼€æˆ‘ä»¬çš„åº”ç”¨ï¼Œæ˜¾ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="/img/node/img-2.jpg" alt="dashboard"></p>
<h3 id="èµ„æº-5">èµ„æº</h3>
<p>æƒ³äº†è§£æ›´å¤šå…³äºExpresså’ŒSocket.IOï¼Œå¯ä»¥ç‚¹å‡»<a href="//www.digitalocean.com/community/tutorials/how-to-install-express-a-node-js-framework-and-set-up-socket-io-on-a-vps">è¿™ä¸ªæ•™ç¨‹</a>ã€‚</p>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>Nodeå¹¶ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œä½†æ˜¯å¸Œæœ›ä½ èƒ½åœ¨æ­£ç¡®çš„æƒ…å†µä¸‹ä½¿ç”¨ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¯¹äºI/Oç­‰å¾…å’Œé«˜å¹¶å‘çš„åº”ç”¨ï¼ŒNodeæ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚</p>
<p>npmæ³¨å†Œé‡æ¯å¤©éƒ½åœ¨å¢é•¿ï¼Œè¿™è¯´æ˜å°†ä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„Nodeæ¨¡å—å¯ä»¥ä½¿ç”¨ã€‚æˆ‘ä»¬ä¸ä»…å­¦ä¹ äº†å¦‚ä½•å®‰è£…Nodeï¼Œä¹Ÿäº†è§£äº†Nodeçš„æ ¸å¿ƒï¼Œä¾‹å¦‚å›è°ƒå‡½æ•°ã€äº‹ä»¶å’Œæ•°æ®æµã€‚åœ¨æ–‡ç« çš„æœ«å°¾æˆ‘ä»¬è§£å†³äº†ä¸€äº›å®é™…çš„é—®é¢˜ï¼Œä¾‹å¦‚é”™è¯¯å¤„ç†ã€è°ƒè¯•å’Œåˆ›å»ºäº†ä¸€ä¸ªå®ä¾‹ã€‚</p>
<p>å¦‚æœä½ è¿˜æ€€ç–‘Nodeæ˜¯å¦è¶³å¤Ÿæˆç†Ÿï¼Œä½ è¦çŸ¥é“ä¸€äº›å¤§å…¬å¸åƒé›…è™ã€æ²ƒå°”ç›æˆ–PayPalæ­£åœ¨ç”¨å®ƒã€‚å¦‚æœä½ è¿˜æœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥æå‡ºæ¥ã€‚</p>
<p>åŸæ–‡é“¾æ¥ï¼š</p>
<blockquote>
<ul>
<li><a href="http://www.airpair.com/javascript/node-js-tutorial/" target="_blank" rel="external">http://www.airpair.com/javascript/node-js-tutorial/</a></li>
</ul>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="ä»‹ç»">ä»‹ç»</h2>
<p>éšç€Node.jsçš„å‘å±•ï¼ŒJavascriptåº”ç”¨åœ¨è¿™å‡ å¹´çªé£çŒ›è¿›çš„æµè¡Œã€‚å¦‚æœä½ å»<a href="//www.modulecounts.com/">modulecounts.com</a>ä¸Šçœ‹çœ‹ï¼Œä½ ä¼šå‘ç°Node packageså·²]]>
    </summary>
    
      <category term="Node.js" scheme="http://yoursite.com/tags/Node-js/"/>
    
      <category term="Javascript" scheme="http://yoursite.com/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Javascriptç±»å‹ç†è§£ä¸ç±»å‹åˆ¤æ–­]]></title>
    <link href="http://yoursite.com/2014/09/29/Javascript%E7%B1%BB%E5%9E%8B%E7%90%86%E8%A7%A3%E4%B8%8E%E7%B1%BB%E5%9E%8B%E5%88%A4%E6%96%AD/"/>
    <id>http://yoursite.com/2014/09/29/Javascriptç±»å‹ç†è§£ä¸ç±»å‹åˆ¤æ–­/</id>
    <published>2014-09-29T05:34:38.000Z</published>
    <updated>2014-11-02T12:00:05.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ç†è§£Javascriptçš„ç±»å‹æ˜¯å­¦ä¹ Javascriptçš„åŸºç¡€ï¼Œä½†æ˜¯ä½œä¸ºæ–°æ‰‹å¾ˆå®¹æ˜“åœ¨åˆ¤æ–­Javascriptä¸Šå®¹æ˜“æ··æ·†ï¼Œæ‰€ä»¥åœ¨æ­¤æ•´ç†æ¸…è‡ªå·±çš„æ€è·¯ã€‚</p>
<h2 id="ç±»å‹">ç±»å‹</h2>
<blockquote>
<p>JavaScript ä¸­æ‰€æœ‰å˜é‡éƒ½æ˜¯å¯¹è±¡ï¼Œé™¤äº†ä¸¤ä¸ªä¾‹å¤– null å’Œ undefinedã€‚</p>
</blockquote>
<p>ä½œä¸ºæ–°æ‰‹å¾ˆå®¹æ˜“è¢«ä¸Šé¢è¿™å¥è¯è¯¯å¯¼ï¼Œé¦–å…ˆè§£é‡Šä¸‹ä¸Šé¢è¿™å¥è¯ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="literal">false</span>.toString(); <span class="comment">// 'false'</span></div><div class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].toString(); <span class="comment">// '1,2,3'</span></div><div class="line">(<span class="number">2</span>).toString(); <span class="comment">// '2'</span></div></pre></td></tr></table></figure>

<p>é€šè¿‡ä¸Šé¢çš„ä»£ç ï¼Œå¯ä»¥çœ‹å‡ºå¸ƒå°”ã€æ•°ç»„ã€æ•°å­—éƒ½å…·æœ‰<code>toString()</code>è¿™ä¸€æ–¹æ³•ï¼Œå…¶å®é™¤äº†<code>null</code>å’Œ<code>undefined</code>å¤–çš„æ•°æ®ç±»å‹éƒ½ç»§æ‰¿è‡ª<code>Object</code>å¯¹è±¡éƒ½å…·<code>Object</code>çš„æ–¹æ³•å’Œå±æ€§ï¼Œè¿™äº›çœ‹ä¼¼éå¯¹è±¡çš„ç±»å‹ä½¿ç”¨èµ·æ¥å´å¾ˆåƒå¯¹è±¡ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¯´å®ƒä»¬éƒ½æ˜¯å¯¹è±¡ã€‚å¯æ˜¯Javascriptä¾ç„¶å…·æœ‰ç±»å‹ï¼Œæˆ‘æƒ³å¤§è‡´å¯ä»¥åˆ†æˆä¸‹é¢å‡ ç±»ï¼š</p>
<ul>
<li>Number</li>
<li>String</li>
<li>Boolean</li>
<li>Object</li>
<li>Null</li>
<li>Undefined</li>
</ul>
<p><code>Number</code>ã€<code>String</code>ã€<code>Boolean</code>ã€<code>Null</code>ã€<code>Undefined</code>éƒ½æ˜¯æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåªæœ‰<code>Object</code>å±äºå¤æ‚æ•°æ®ç±»å‹ã€‚<code>Null</code>å’Œ<code>Undefined</code>éƒ½è¡¨ç¤ºç©ºï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºï¼š<code>Null</code>è¡¨ç¤ºæ— å€¼ï¼Œä¸€èˆ¬æ˜¯äººä¸ºçš„å°†å˜é‡çš„å€¼è®¾ç½®ä¸º<code>null</code>ï¼›<code>Undefined</code>è¡¨ç¤ºæœªçŸ¥å€¼ï¼Œä¸€èˆ¬åœ¨ä½¿ç”¨varå£°æ˜å˜é‡ä½†æœªå¯¹å…¶åŠ ä»¥åˆå§‹åŒ–æ—¶ï¼Œè¿™ä¸ªå˜é‡å€¼ä¸º<code>undefined</code>ã€‚</p>
<p><code>Object</code>åˆåˆ†ä¸ºä»¥ä¸‹å‡ ç§ç±»å‹ï¼š</p>
<ul>
<li>Object<ul>
<li>Function</li>
<li>Array</li>
<li>Date</li>
<li>RegExp</li>
</ul>
</li>
</ul>
<h2 id="typeofæ“ä½œç¬¦">typeofæ“ä½œç¬¦</h2>
<p><code>typeof</code>æ“ä½œç¬¦ï¼ˆå’Œ<code>instanceof</code>ä¸€èµ·ï¼‰æˆ–è®¸æ˜¯ JavaScript ä¸­æœ€å¤§çš„è®¾è®¡ç¼ºé™·ï¼Œ å› ä¸ºå‡ ä¹ä¸å¯èƒ½ä»å®ƒä»¬é‚£é‡Œå¾—åˆ°æƒ³è¦çš„ç»“æœã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">typeof</span> []; <span class="comment">// object</span></div><div class="line"><span class="keyword">typeof</span> {}; <span class="comment">// object</span></div><div class="line"><span class="keyword">typeof</span> <span class="string">''</span>; <span class="comment">// string</span></div><div class="line"><span class="keyword">typeof</span> <span class="keyword">new</span> <span class="built_in">Date</span>() <span class="comment">// object</span></div><div class="line"><span class="keyword">typeof</span> <span class="number">1</span>; <span class="comment">// number</span></div><div class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{}; <span class="comment">// function</span></div><div class="line"><span class="keyword">typeof</span> /test/i; <span class="comment">// object</span></div><div class="line"><span class="keyword">typeof</span> <span class="literal">true</span>; <span class="comment">// boolean</span></div><div class="line"><span class="keyword">typeof</span> <span class="literal">null</span>; <span class="comment">// object</span></div><div class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>; <span class="comment">// undefined</span></div></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆï¼Ÿ<code>function</code>æ˜æ˜æ˜¯<code>Object</code>ç±»å‹ï¼Œå´æ˜¾ç¤º<code>function</code>ï¼›<code>null</code>æ˜æ˜æ˜¯<code>Null</code>ç±»å‹ï¼Œå´æ˜¾ç¤ºâ€™objectâ€™ã€‚æ‰€ä»¥<code>typeof</code>æ“ä½œç¬¦å¯¹ç±»å‹çš„åˆ¤æ–­æ˜¯ä¸é è°±çš„ï¼Œé™¤éç±»å‹åœ¨ç»™å®šçš„èŒƒå›´ä¸”<code>typeof</code>ç¡®å®èƒ½å¤ŸåŒºåˆ†è¿™äº›ç±»å‹ã€‚</p>
<h2 id="ç±»å‹çš„åŒºåˆ†">ç±»å‹çš„åŒºåˆ†</h2>
<p>Javascriptæ ‡å‡†æ ‡å‡†æ–‡æ¡£ç»™å‡ºäº†åŒºåˆ†ç±»å‹çš„åŠæ³•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.toString.call();</div></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸Šé¢çš„æ–¹æ³•æ•ˆæœå¦‚ä½•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">Object</span>.prototype.toString.call([]); <span class="comment">// [object Array]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call({}); <span class="comment">// [object Object]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">''</span>); <span class="comment">// [object String]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// [object Date]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="number">1</span>); <span class="comment">// [object Number]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{}); <span class="comment">// [object Function]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="regexp">/test/i</span>); <span class="comment">// [object RegExp]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>); <span class="comment">// [object Boolean]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>); <span class="comment">// [object Null]</span></div><div class="line"><span class="built_in">Object</span>.prototype.toString.call(); <span class="comment">// [object Undefined]</span></div></pre></td></tr></table></figure>

<p>æ•ˆæœç¡®å®æ¯”<code>typeof</code>æ“ä½œç¬¦å·ä¸ä¸€æ ·ï¼Œé‚£æˆ‘ä»¬åœ¨åˆ¤æ–­çš„æ—¶å€™å°±å¯ä»¥è¿™ä¹ˆä½¿ç”¨äº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> getType = <span class="function"><span class="keyword">function</span> <span class="params">(elem)</span> </span>{</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(elem);</div><div class="line">    },</div><div class="line">    person = {};</div><div class="line">    person.getName = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">      <span class="keyword">return</span> <span class="string">'Jason'</span>;</div><div class="line">    };</div><div class="line"><span class="keyword">if</span> (getType(person) === <span class="string">'[object Object]'</span>) {</div><div class="line">  person.getName();</div><div class="line">}</div></pre></td></tr></table></figure>

<p>å¯æ˜¯è¿™æ ·è¿˜ä¸å¤Ÿå®Œç¾ï¼Œå› ä¸º<code>Object.prototype.toString.call()</code>è¿”å›å€¼æ˜¯å­—ç¬¦ä¸²æ‰€ä»¥å¯ä»¥ç”¨<code>.slice(8, -1)</code>æ–¹æ³•å»æ‰<code>[object</code>å’Œ<code>]</code>ã€‚æ‰€ä»¥æˆ‘ä»¬å†æ”¹è¿›ä¸€ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> getType = <span class="function"><span class="keyword">function</span> <span class="params">(elem)</span> </span>{</div><div class="line">      <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(elem).slice(<span class="number">8</span>, -<span class="number">1</span>);</div><div class="line">    },</div><div class="line">    person = {};</div><div class="line">    person.getName = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">      <span class="keyword">return</span> <span class="string">'Jason'</span>;</div><div class="line">    };</div><div class="line"><span class="keyword">if</span> (getType(person) === <span class="string">'Object'</span>) {</div><div class="line">  person.getName();</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="å†™ä¸ªç±»åº“">å†™ä¸ªç±»åº“</h2>
<p>åˆ©ç”¨ä¸Šé¢åˆ¤æ–­ç±»å‹çš„æ–¹æ³•å¯ä»¥å†™ä¸ªç±»åº“ï¼Œæ­¤ç±»åº“æ¥è‡ª(Axis.js)[//github.com/toddmotto/axis]:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> <span class="params">(root, factory)</span> </span>{</div><div class="line">  <span class="comment">// åˆ¤æ–­æ˜¯å¦ä½¿ç”¨äº†æ¨¡å—</span></div><div class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> define === <span class="string">'function'</span> && define.amd) {</div><div class="line">    <span class="comment">// ä½¿ç”¨AMDæ¨¡å—</span></div><div class="line">    define(factory);</div><div class="line">  } <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> exports === <span class="string">'object'</span>) {</div><div class="line">    <span class="comment">// ä½¿ç”¨CMDæ¨¡å—</span></div><div class="line">    <span class="built_in">module</span>.exports = factory;</div><div class="line">  } <span class="keyword">else</span> {</div><div class="line">    <span class="comment">// æ²¡æœ‰ä½¿ç”¨æ¨¡å—ï¼Œæ”¾åœ¨å…¨å±€ä¸‹</span></div><div class="line">    root.axis = factory();</div><div class="line">  }</div><div class="line">})(<span class="keyword">this</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">  <span class="comment">// ä¸¥æ ¼æ¨¡å¼</span></div><div class="line"><span class="pi">  'use strict'</span>;</div><div class="line">  <span class="keyword">var</span> exports = {};</div><div class="line">  <span class="comment">// å°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„</span></div><div class="line">  <span class="keyword">var</span> types = <span class="string">'Array Object String Date RegExp Function Boolean Number Null Undefined'</span>.split(<span class="string">' '</span>);</div><div class="line">  <span class="comment">// åˆ¤æ–­ç±»å‹</span></div><div class="line">  <span class="keyword">var</span> type = <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">this</span>).slice(<span class="number">8</span>, -<span class="number">1</span>);</div><div class="line">  };</div><div class="line">  <span class="comment">// éå†typesï¼Œä¸ºexportså¯¹è±¡æ·»åŠ isArrayã€isObject...ç­‰æ–¹æ³•</span></div><div class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = types.length; i--;) {</div><div class="line">    exports[<span class="string">'is'</span> + types[i]] = (<span class="function"><span class="keyword">function</span> <span class="params">(self)</span> </span>{</div><div class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">(elem)</span> </span>{</div><div class="line">        <span class="comment">// type.call(elem)å°†typeæ–¹æ³•é‡Œçš„thisæŒ‡é’ˆæŒ‡å‘elem</span></div><div class="line">        <span class="keyword">return</span> type.call(elem) === self;</div><div class="line">      };</div><div class="line">    })(types[i]);</div><div class="line">  }</div><div class="line">  <span class="keyword">return</span> exports;</div><div class="line">});</div></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">axis.isArray([]); <span class="comment">// true</span></div><div class="line">axis.isObject({}); <span class="comment">// true</span></div><div class="line">axis.isString(<span class="string">''</span>); <span class="comment">// true</span></div><div class="line">axis.isDate(<span class="keyword">new</span> <span class="built_in">Date</span>()); <span class="comment">// true</span></div><div class="line">axis.isRegExp(<span class="regexp">/test/i</span>); <span class="comment">// true</span></div><div class="line">axis.isFunction(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{}); <span class="comment">// true</span></div><div class="line">axis.isBoolean(<span class="literal">true</span>); <span class="comment">// true</span></div><div class="line">axis.isNumber(<span class="number">1</span>); <span class="comment">// true</span></div><div class="line">axis.isNull(<span class="literal">null</span>); <span class="comment">// true</span></div><div class="line">axis.isUndefined(); <span class="comment">// true</span></div></pre></td></tr></table></figure>

<blockquote>
<p> å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a href="http://toddmotto.com/understanding-javascript-types-and-reliable-type-checking/" target="_blank" rel="external">http://toddmotto.com/understanding-javascript-types-and-reliable-type-checking/</a></li>
<li><a href="http://bonsaiden.github.io/JavaScript-Garden/" target="_blank" rel="external">http://bonsaiden.github.io/JavaScript-Garden/</a></li>
</ul>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>ç†è§£Javascriptçš„ç±»å‹æ˜¯å­¦ä¹ Javascriptçš„åŸºç¡€ï¼Œä½†æ˜¯ä½œä¸ºæ–°æ‰‹å¾ˆå®¹æ˜“åœ¨åˆ¤æ–­Javascriptä¸Šå®¹æ˜“æ··æ·†ï¼Œæ‰€ä»¥åœ¨æ­¤æ•´ç†æ¸…è‡ªå·±çš„æ€è·¯ã€‚</p>
<h2 id="ç±»å‹">ç±»å‹</h2>
<blockquote>
<p>Jav]]>
    </summary>
    
      <category term="Javascript" scheme="http://yoursite.com/tags/Javascript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[æ¸…é™¤æµ®åŠ¨çš„å‡ ç§å®ç°æ–¹å¼]]></title>
    <link href="http://yoursite.com/2014/09/23/%E6%B8%85%E9%99%A4%E6%B5%AE%E5%8A%A8%E7%9A%84%E5%87%A0%E7%A7%8D%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/"/>
    <id>http://yoursite.com/2014/09/23/æ¸…é™¤æµ®åŠ¨çš„å‡ ç§å®ç°æ–¹å¼/</id>
    <published>2014-09-23T13:31:24.000Z</published>
    <updated>2015-01-26T14:50:24.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p><code>float: left</code>ä¼šä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œä¸å æ®æ–‡æ¡£æµçš„ç©ºé—´ã€‚å¦‚æœå­å…ƒç´ ä½¿ç”¨<code>float: left</code>ï¼Œçˆ¶å…ƒç´ ä¸åšç›¸å…³çš„å¤„ç†çš„è¯ï¼Œçˆ¶å…ƒç´ å°±æ²¡æ³•åŒ…è£¹ä½å­å…ƒç´ ã€‚ä¹‹å‰ä¹ æƒ¯åœ¨çˆ¶å…ƒç´ ä¸ŠåŠ <code>overflow: hidden</code>æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œå¯æ˜¯ä¼šæœ‰å±€é™æ€§ï¼Œå½“å­å…ƒç´ è¶…å‡ºçˆ¶å…ƒç´ çš„è¯ï¼Œè¶…å‡ºéƒ¨åˆ†å°±ä¼šè¢«éšè—ï¼Œæ‰€ä»¥è¯´æ¸…é™¤æµ®åŠ¨è¿™è°­æ°´å¾ˆæ·±ã€‚</p>
<h2 id="ä¸‘é™‹çš„å®ç°æ–¹å¼">ä¸‘é™‹çš„å®ç°æ–¹å¼</h2>
<p><strong>html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">br</span> <span class="attribute">class</span>=<span class="value">"cb"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">50px</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">_display</span>:<span class="value"> inline</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.cb</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">clear</span>:<span class="value"> both</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>æœ€ä¸‘é™‹çš„å®ç°æ–¹å¼å°±æ˜¯åœ¨å­å…ƒç´ åå†åŠ ä¸€ä¸ªç”¨äºæ¸…é™¤æµ®åŠ¨çš„<code>br</code>å…ƒç´ ï¼Œå†™ä¸ªä¸“é—¨æ¸…é™¤æµ®åŠ¨çš„<code>.cb</code>ç±»åŠ åœ¨å®ƒä¸Šé¢ã€‚ä¸Šé¢çš„ä¾‹å­ä¹Ÿå¯ä½¿ç”¨<code>clear: left</code>æ¸…é™¤å·¦æµ®åŠ¨ï¼Œä¸ºäº†æ–¹ä¾¿æ‰ä½¿ç”¨<code>clear: both</code>ï¼Œæœ€åä¸è¦å¿˜äº†åŠ ä¸Š<code>_display: inline</code>å…¼å®¹IE6ã€‚</p>
<h2 id="çˆ¶äº²å…ƒç´ æµ®åŠ¨çš„å®ç°æ–¹å¼">çˆ¶äº²å…ƒç´ æµ®åŠ¨çš„å®ç°æ–¹å¼</h2>
<p><strong>html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class">.parent</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>åªè¦çˆ¶å…ƒç´ ä¹Ÿè·Ÿç€æµ®åŠ¨çš„è¯ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°æ•ˆæœã€‚å¯æ˜¯è¿™æ ·ä¼šå½±å“åé¢å…ƒç´ çš„å®šä½ï¼Œè€Œä¸”æœ‰äº›æ—¶å€™çˆ¶å…ƒç´ æ˜¯å®šä½æ­»çš„ï¼Œæ— æ³•å˜æˆæµ®åŠ¨ã€‚</p>
<h2 id="overflowå®ç°æ–¹å¼">overflowå®ç°æ–¹å¼</h2>
<p><strong>html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class">.parent</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">zoom</span>:<span class="value"> <span class="number">1</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">50px</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>åœ¨çˆ¶å…ƒç´ ä¸Šä½¿ç”¨<code>overflow: hidden</code>å¯ä»¥è¾¾åˆ°æ¸…é™¤æµ®åŠ¨çš„æ•ˆæœï¼Œä¹Ÿå¯ä»¥æ˜¯<code>overflow: auto</code>ã€‚å¯æ˜¯é€šè¿‡overflowå®ç°çš„æ¸…é™¤æµ®åŠ¨éƒ½æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå½“å­å…ƒç´ è¶…å‡ºäº†çˆ¶å…ƒç´ ï¼Œçˆ¶å…ƒç´ ä½¿ç”¨<code>overflow: hidden</code>çš„è¯ï¼Œå­å…ƒç´ è¶…å‡ºçš„éƒ¨åˆ†ä¼šè¢«éšè—ï¼›ä½¿ç”¨<code>overflow: auto</code>çš„è¯ï¼Œçˆ¶å…ƒç´ ä¸Šä¼šå‡ºç°æ»šåŠ¨æ¡ï¼Œæœ€åä¹Ÿåˆ«å¿˜åŠ ä¸Š<code>zoom: 1</code>è§¦å‘IEçš„hasLayoutã€‚</p>
<h2 id="display:inline-blockçš„å®ç°æ–¹å¼">display:inline-blockçš„å®ç°æ–¹å¼</h2>
<p><strong>html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="class">.parent</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">0px</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> inline-block</span></span>;</div><div class="line">  <span class="rule">*<span class="attribute">display</span>:<span class="value"> inline</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">zoom</span>:<span class="value"> <span class="number">1</span></span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>å…¶å®æ¢ä¸ªè§’åº¦æƒ³æƒ³ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨floatæ¥å®ç°æ•ˆæœï¼Œé‚£å°±æ˜¯ç”¨<code>display: inline-block</code>ï¼Œä½¿å¾—å—çº§å…ƒç´ å…·æœ‰è¡Œå†…å…ƒç´ çš„ç‰¹æ€§ã€‚IE8ä»¥ä¸‹ä¸æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œä½†æ˜¯æœ‰è§£å†³çš„æ–¹æ¡ˆå°±æ˜¯åŠ ä¸Š<code>*display: inline; zoom: 1;</code>ã€‚ä¸ºä»€ä¹ˆè¦åŠ <code>font-size: 0px</code>?æ¶ˆé™¤ç°ä»£æµè§ˆå™¨ä¸Šå‡ºç°çš„é—´è·ï¼Œä½†æ˜¯åœ¨å­å…ƒç´ ä¸Šè¦é‡ç½®<code>font-size</code>ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜å¯ä»¥æ”¹å˜htmlä»£ç ç¼©è¿›ï¼Œå»æ‰æ¢è¡Œï¼Œå†™æˆä¸€è¡Œã€‚</p>
<h2 id="ç”¨äºç°ä»£æµè§ˆå™¨çš„å®ç°æ–¹å¼">ç”¨äºç°ä»£æµè§ˆå™¨çš„å®ç°æ–¹å¼</h2>
<p><strong>html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class">.parent</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> -webkit-flex</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> -ms-flex</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> flex</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">-webkit-flex-flow</span>:<span class="value"> row wrap</span></span>;</div><div class="line">      <span class="rule"><span class="attribute">-ms-flex-flow</span>:<span class="value"> row wrap</span></span>;</div><div class="line">          <span class="rule"><span class="attribute">flex-flow</span>:<span class="value"> row wrap</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>è¿™ç§ç”¨äºç°ä»£æµè§ˆå™¨çš„å®ç°æ–¹å¼æ›´åŠ çµæ´»äº†ï¼Œå¯æ˜¯ä¸æ”¯æŒIE10ä»¥ä¸‹çš„æµè§ˆå™¨ï¼Œ<code>flex-flow</code>çš„ä¸¤ä¸ªå€¼åˆ†åˆ«è¡¨ç¤º<code>flex-direction</code>ï¼ˆæ¨ªå‘è¿˜æ˜¯çºµå‘ï¼‰ã€<code>flex-wrap</code>ï¼ˆæ˜¯å¦æ¢è¡Œï¼‰ï¼Œä¸Šé¢çš„ä¾‹å­æ˜¯æ¨ªå‘å¤šè¡Œæ’åˆ—ã€‚é™¤æ­¤ä¹‹å¤–è¿˜å¾ˆæ”¯æŒå¾ˆå¤šå±æ€§ï¼Œæƒ³äº†è§£æ›´å¤šå¯ä»¥çœ‹<a href="//dev.opera.com/articles/flexbox-basics/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<h2 id=":afterä¼ªå…ƒç´ çš„å®ç°æ–¹å¼">:afterä¼ªå…ƒç´ çš„å®ç°æ–¹å¼</h2>
<p><strong>html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="class">.parent</span><span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="string">""</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> table</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">clear</span>:<span class="value"> both</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">50px</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>æˆ–è€…</p>
<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="class">.parent</span><span class="pseudo">:before</span>,</div><div class="line"><span class="class">.parent</span><span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="string">"."</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> block</span></span>;</div><div class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">0</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">overflow</span>:<span class="value"> hidden</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.parent</span><span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">clear</span>:<span class="value"> both</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.parent</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">zoom</span>:<span class="value"> <span class="number">1</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">50px</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>è¿™ç§æ–¹å¼åŸç†åˆ©ç”¨<code>:after</code>ä¼ªå…ƒç´ ï¼Œå®ç°åœ¨çˆ¶å…ƒç´ å†…å®¹åé¢æ¸…é™¤æµ®åŠ¨çš„æ•ˆæœã€‚</p>
<h2 id="æœ€ä½³å®ç°æ–¹å¼">æœ€ä½³å®ç°æ–¹å¼</h2>
<p><strong>html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"parent"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"child"</span>&gt;</span><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="class">.parent</span><span class="pseudo">:before</span>,</div><div class="line"><span class="class">.parent</span><span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="string">""</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> table</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.parent</span><span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">clear</span>:<span class="value"> both</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.parent</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">zoom</span>:<span class="value"> <span class="number">1</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.child</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">height</span>:<span class="value"> <span class="number">50px</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ˜¯ç°åœ¨æœ€å¹¿æ³›è¢«æ¥å—åšæ³•ï¼Œä½œè€…æ˜¯<a href="//nicolasgallagher.com/">Nicolas Gallagher</a>ï¼Œæ˜¯å‰ä¸€ç§æ–¹å¼çš„æ”¹è¿›ç‰ˆã€‚</p>
<h2 id="ç½‘æ ¼å¸ƒå±€">ç½‘æ ¼å¸ƒå±€</h2>
<p>åˆ©ç”¨æ¸…é™¤æµ®åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±å¼€å‘ä¸€ä¸ªç®€æ˜“çš„ç½‘æ ¼å¸ƒå±€ã€‚</p>
<p><strong>css</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">*,</div><div class="line">*<span class="pseudo">:before</span>,</div><div class="line">*<span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">-webkit-box-sizing</span>:<span class="value"> border-box</span></span>;</div><div class="line">     <span class="rule"><span class="attribute">-moz-box-sizing</span>:<span class="value"> border-box</span></span>;</div><div class="line">          <span class="rule"><span class="attribute">box-sizing</span>:<span class="value"> border-box</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.row</span><span class="pseudo">:before</span>,</div><div class="line"><span class="class">.row</span><span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">content</span>:<span class="value"> <span class="string">""</span></span></span>;</div><div class="line">  <span class="rule"><span class="attribute">display</span>:<span class="value"> table</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.row</span><span class="pseudo">:after</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">clear</span>:<span class="value"> both</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.row</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">zoom</span>:<span class="value"> <span class="number">1</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-1</span>,</div><div class="line"><span class="class">.col-2</span>,</div><div class="line"><span class="class">.col-3</span>,</div><div class="line"><span class="class">.col-4</span>,</div><div class="line"><span class="class">.col-5</span>,</div><div class="line"><span class="class">.col-6</span>,</div><div class="line"><span class="class">.col-7</span>,</div><div class="line"><span class="class">.col-8</span>,</div><div class="line"><span class="class">.col-9</span>,</div><div class="line"><span class="class">.col-10</span>,</div><div class="line"><span class="class">.col-11</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">float</span>:<span class="value"> left</span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-1</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">8.333333333333332%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-2</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">16.666666666666664%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-3</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">25%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-4</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">33.33333333333333%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-5</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">41.66666666666667%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-6</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">50%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-7</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">58.333333333333336%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-8</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">66.66666666666666%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-9</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">75%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-10</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">83.33333333333334%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-11</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">91.66666666666666%</span></span></span>;</div><div class="line"><span class="rule">}</span></div><div class="line"><span class="class">.col-12</span> <span class="rules">{</span></div><div class="line">  <span class="rule"><span class="attribute">width</span>:<span class="value"> <span class="number">100%</span></span></span>;</div><div class="line"><span class="rule">}</span></div></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ–¹æ³•</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"row"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"col-10"</span>&gt;</span></div><div class="line">    ...</div><div class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"col-2"</span>&gt;</span></div><div class="line">    ...</div><div class="line">  <span class="tag">&lt;/<span class="title">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></div></pre></td></tr></table></figure>

<p>é¦–å…ˆåˆ©ç”¨<code>box-sizing: border-box</code>,å°†ç›’å­æ¨¡å‹è®¾ç½®æˆIEç›’å­æ¨¡å‹ï¼Œç„¶åå­å…ƒç´ éƒ½<code>float: left</code>ï¼ŒæŒ‰ç…§ç™¾åˆ†æ¯”å»è®¾ç½®å®½åº¦ï¼Œçˆ¶å…ƒç´ ä½¿ç”¨æ¸…é™¤æµ®åŠ¨ã€‚ä½¿ç”¨çš„æ—¶å€™æ³¨æ„<code>col-X</code>æ•°å­—åŠ èµ·æ¥è¦ç­‰äº12å°±å¯ä»¥äº†ã€‚</p>
<blockquote>
<p> å‚è€ƒé“¾æ¥ï¼š</p>
<ul>
<li><a href="http://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best" target="_blank" rel="external">http://stackoverflow.com/questions/211383/which-method-of-clearfix-is-best</a></li>
<li><a href="https://dev.opera.com/articles/flexbox-basics/" target="_blank" rel="external">https://dev.opera.com/articles/flexbox-basics/</a></li>
<li><a href="http://www.cssmojo.com/latest_new_clearfix_so_far/" target="_blank" rel="external">http://www.cssmojo.com/latest_new_clearfix_so_far/</a></li>
<li><a href="http://nicolasgallagher.com/micro-clearfix-hack/" target="_blank" rel="external">http://nicolasgallagher.com/micro-clearfix-hack/</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2009/04/float_clearing.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2009/04/float_clearing.html</a></li>
</ul>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p><code>float: left</code>ä¼šä½¿å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œä¸å æ®æ–‡æ¡£æµçš„ç©ºé—´ã€‚å¦‚æœå­å…ƒç´ ä½¿ç”¨<code>float: left</code>ï¼Œçˆ¶å…ƒç´ ä¸åšç›¸å…³çš„å¤„ç†çš„è¯ï¼Œçˆ¶å…ƒç´ å°±æ²¡æ³•åŒ…è£¹ä½å­å…ƒç´ ã€‚ä¹‹å‰ä¹ æƒ¯åœ¨çˆ¶å…ƒç´ ä¸ŠåŠ <code]]>
    </summary>
    
      <category term="CSS" scheme="http://yoursite.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Gulpå…¥é—¨æ•™ç¨‹]]></title>
    <link href="http://yoursite.com/2014/09/17/Gulp%E5%85%A5%E9%97%A8%E6%95%99%E7%A8%8B/"/>
    <id>http://yoursite.com/2014/09/17/Gulpå…¥é—¨æ•™ç¨‹/</id>
    <published>2014-09-16T16:34:58.000Z</published>
    <updated>2015-01-26T14:50:24.000Z</updated>
    <content type="html"><![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æœ€è¿‘æµè¡Œå‰ç«¯æ„å»ºå·¥å…·ï¼Œè‹¦äºä¹‹å‰ä½¿ç”¨Gruntï¼Œä»£ç å¾ˆéš¾é˜…è¯»ï¼Œç°åœ¨å‡ºäº†Gulpï¼ŒçœŸæ˜¯æ‘†è„±äº†ç—›è‹¦ã€‚å‘ç°äº†ä¸€ç¯‡å¾ˆå¥½çš„Gulpè‹±æ–‡æ•™ç¨‹ï¼Œæ•´ç†ç¿»è¯‘ç»™å¤§å®¶çœ‹çœ‹ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨Gulp">ä¸ºä»€ä¹ˆä½¿ç”¨Gulp</h2>
<p>GulpåŸºäºNode.jsçš„å‰ç«¯æ„å»ºå·¥å…·ï¼Œé€šè¿‡Gulpçš„æ’ä»¶å¯ä»¥å®ç°å‰ç«¯ä»£ç çš„ç¼–è¯‘ï¼ˆsassã€lessï¼‰ã€å‹ç¼©ã€æµ‹è¯•ï¼›å›¾ç‰‡çš„å‹ç¼©ï¼›æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°ï¼Œè¿˜æœ‰è®¸å¤šå¼ºå¤§çš„æ’ä»¶å¯ä»¥åœ¨<a href="//gulpjs.com/plugins/">è¿™é‡Œ</a>æŸ¥æ‰¾ã€‚æ¯”èµ·Gruntä¸ä»…é…ç½®ç®€å•è€Œä¸”æ›´å®¹æ˜“é˜…è¯»å’Œç»´æŠ¤ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªå¯¹æ¯”ï¼š</p>
<h3 id="Grunt:">Grunt:</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">sass: {</div><div class="line">  dist: {</div><div class="line">    options: {</div><div class="line">      style: <span class="string">'expanded'</span></div><div class="line">    },</div><div class="line">    files: {</div><div class="line">      <span class="string">'dist/assets/css/main.css'</span>: <span class="string">'src/styles/main.scss'</span>,</div><div class="line">    }</div><div class="line">  }</div><div class="line">},</div><div class="line">autoprefixer: {</div><div class="line">  dist: {</div><div class="line">    options: {</div><div class="line">      browsers: [</div><div class="line">        <span class="string">'last 2 version'</span>, <span class="string">'safari 5'</span>, <span class="string">'ie 8'</span>, <span class="string">'ie 9'</span>, <span class="string">'opera 12.1'</span>, <span class="string">'ios 6'</span>, <span class="string">'android 4'</span></div><div class="line">      ]</div><div class="line">    },</div><div class="line">    src: <span class="string">'dist/assets/css/main.css'</span>,</div><div class="line">    dest: <span class="string">'dist/assets/css/main.css'</span></div><div class="line">  }</div><div class="line">},</div><div class="line">grunt.registerTask(<span class="string">'styles'</span>, [<span class="string">'sass'</span>, <span class="string">'autoprefixer'</span>]);</div></pre></td></tr></table></figure>

<p>åœ¨Grunté‡Œé¢ï¼Œæ¯ä¸ªæ’ä»¶ä½¿ç”¨çš„æ–¹å¼ç›¸å¯¹ç‹¬ç«‹ï¼Œæ­£å¦‚ä¸Šé¢çš„ä»£ç é€šè¿‡sassæ’ä»¶å°†main.sassæ–‡ä»¶ç¼–è¯‘æˆmain.cssæ–‡ä»¶ï¼Œæ¥ç€autoprefixeræ’ä»¶å†å¯¹ç¼–è¯‘å¥½çš„main.cssæ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼Œæœ€åè¦†ç›–main.cssã€‚é‚£ä¹ˆè¦†ç›–æ–‡ä»¶å°±æ˜¯å¤šä½™çš„äº†ï¼Œæœ‰æ²¡åŠæ³•åšåˆ°sasså’Œautoprefixerä¸€å¹¶å¤„ç†å®Œå†ç”Ÿæˆmain.cssï¼Ÿæˆ‘ä»¬æ¥çœ‹çœ‹Gulpæ˜¯å¦‚ä½•åšåˆ°çš„ï¼š</p>
<h3 id="Gulpï¼š">Gulpï¼š</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'sass'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/styles/main.scss'</span>)</div><div class="line">    .pipe(sass({ style: <span class="string">'compressed'</span> }))</div><div class="line">    .pipe(autoprefixer(<span class="string">'last 2 version'</span>, <span class="string">'safari 5'</span>, <span class="string">'ie 8'</span>, <span class="string">'ie 9'</span>, <span class="string">'opera 12.1'</span>, <span class="string">'ios 6'</span>, <span class="string">'android 4'</span>))</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/assets/css'</span>))</div><div class="line">});</div></pre></td></tr></table></figure>

<p>ä½¿ç”¨Gulpæˆ‘ä»¬åªéœ€è¦æ”¾ä¸€ä¸ªè·¯å¾„ï¼Œé€šè¿‡ç®¡é“æ–¹å¼ä½¿ç”¨æ’ä»¶ï¼Œæœ€åç”Ÿæˆæ–‡ä»¶ï¼Œæ˜¯ä¸æ˜¯æœ‰ç§jQueryçš„æ„Ÿè§‰ã€‚è¿™ç§æ–¹å¼ä¸ä»…æé«˜æ•ˆç‡è€Œä¸”ä¸€çœ¼å°±çœ‹æ¸…äº†è¾“å…¥æ–‡ä»¶å’Œè¾“å‡ºæ–‡ä»¶ï¼Œå†ä¹Ÿä¸ç”¨çœ‹gruntfileçœ‹å¾—çœ¼èŠ±ç¼­ä¹±äº†ã€‚</p>
<p>å†æ‰“ä¸ªæ¯”å–»ï¼ŒGruntçš„æ’ä»¶å°±åƒç‹¬ç«‹çš„å·¥å‚ï¼Œè¿™ä¸ªå·¥å‚ç”Ÿæˆå‡ºæ¥çš„äº§å“æ‰“åŒ…å°è£…å¥½åå†é€åˆ°å¦ä¸€ä¸ªå·¥å‚å»åŠ å·¥ï¼Œä½¿ç”¨äº†Gulpåå®ç°äº†å·¥å‚çš„åˆå¹¶ï¼Œæ‰€æœ‰ä¸œè¥¿éƒ½åœ¨ä¸€ä¸ªå·¥å‚é‡Œå®Œæˆäº†ã€‚ç°åœ¨æ˜¯å¦å¯¹Gulpæ„Ÿå…´è¶£äº†ï¼Œé‚£å°±å¼€å§‹ä½¿ç”¨Gulpå§ï¼</p>
<h2 id="å®‰è£…">å®‰è£…</h2>
<p>é¦–å…ˆæˆ‘ä»¬è¦å…¨å±€å®‰è£…ä¸€éï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install gulp -g</div></pre></td></tr></table></figure>

<p>æ¥ç€æˆ‘ä»¬è¦è¿›å»åˆ°é¡¹ç›®çš„æ ¹ç›®å½•å†å®‰è£…ä¸€éï¼ˆç¡®ä¿ä½ æ ¹ç›®å½•å­˜åœ¨package.jsonæ–‡ä»¶ï¼‰ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install gulp --save-dev</div></pre></td></tr></table></figure>

<p>â€”save-devè¿™ä¸ªå±æ€§ä¼šå°†æ¡ç›®ä¿å­˜åˆ°ä½ package.jsonçš„devDependenciesé‡Œé¢</p>
<h2 id="å®‰è£…Gulpæ’ä»¶">å®‰è£…Gulpæ’ä»¶</h2>
<p>æˆ‘ä»¬å°†è¦ä½¿ç”¨Gulpæ’ä»¶æ¥å®Œæˆæˆ‘ä»¬ä»¥ä¸‹ä»»åŠ¡ï¼š</p>
<ul>
<li>sassçš„ç¼–è¯‘ï¼ˆ<a href="//github.com/sindresorhus/gulp-ruby-sass">gulp-ruby-sass</a>ï¼‰</li>
<li>è‡ªåŠ¨æ·»åŠ csså‰ç¼€ï¼ˆ<a href="//github.com/Metrime/gulp-autoprefixer">gulp-autoprefixer</a>ï¼‰</li>
<li>å‹ç¼©cssï¼ˆ<a href="//github.com/jonathanepollack/gulp-minify-css">gulp-minify-css</a>ï¼‰</li>
<li>jsä»£ç æ ¡éªŒï¼ˆ<a href="//github.com/spenceralger/gulp-jshint">gulp-jshint</a>ï¼‰</li>
<li>åˆå¹¶jsæ–‡ä»¶ï¼ˆ<a href="//github.com/wearefractal/gulp-concat">gulp-concat</a>ï¼‰</li>
<li>å‹ç¼©jsä»£ç ï¼ˆ<a href="//github.com/terinjokes/gulp-uglify">gulp-uglify</a>ï¼‰</li>
<li>å‹ç¼©å›¾ç‰‡ï¼ˆ<a href="//github.com/sindresorhus/gulp-imagemin">gulp-imagemin</a>ï¼‰</li>
<li>è‡ªåŠ¨åˆ·æ–°é¡µé¢ï¼ˆ<a href="//github.com/vohof/gulp-livereload">gulp-livereload</a>ï¼‰</li>
<li>å›¾ç‰‡ç¼“å­˜ï¼Œåªæœ‰å›¾ç‰‡æ›¿æ¢äº†æ‰å‹ç¼©ï¼ˆ<a href="//github.com/jgable/gulp-cache">gulp-cache</a>ï¼‰</li>
<li>æ›´æ”¹æé†’ï¼ˆ<a href="//github.com/mikaelbr/gulp-notify">gulp-notify</a>ï¼‰</li>
<li>æ¸…é™¤æ–‡ä»¶ï¼ˆ<a href="//www.npmjs.org/package/del">del</a>ï¼‰</li>
</ul>
<p>å®‰è£…è¿™äº›æ’ä»¶éœ€è¦è¿è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install gulp-ruby-sass gulp-autoprefixer gulp-minify-css gulp-jshint gulp-concat gulp-uglify gulp-imagemin gulp-notify gulp-rename gulp-livereload gulp-cache del --save-dev</div></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¯ä¸€äº›å¸¸ç”¨çš„æ’ä»¶ï¼Œå¦‚æœæƒ³è¦æ‰¾æ›´å¤šçš„æ’ä»¶ç‚¹å‡»<a href="//gratimax.net/search-gulp-plugins/">è¿™é‡Œ</a></p>
<h2 id="åŠ è½½æ’ä»¶">åŠ è½½æ’ä»¶</h2>
<p>æ¥ç€æˆ‘ä»¬è¦åˆ›å»ºä¸€ä¸ªgulpfile.jsåœ¨æ ¹ç›®å½•ä¸‹ï¼Œç„¶ååœ¨é‡Œé¢åŠ è½½æ’ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    sass = <span class="built_in">require</span>(<span class="string">'gulp-ruby-sass'</span>),</div><div class="line">    autoprefixer = <span class="built_in">require</span>(<span class="string">'gulp-autoprefixer'</span>),</div><div class="line">    minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>),</div><div class="line">    jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>),</div><div class="line">    uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),</div><div class="line">    imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>),</div><div class="line">    rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>),</div><div class="line">    concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>),</div><div class="line">    notify = <span class="built_in">require</span>(<span class="string">'gulp-notify'</span>),</div><div class="line">    cache = <span class="built_in">require</span>(<span class="string">'gulp-cache'</span>),</div><div class="line">    livereload = <span class="built_in">require</span>(<span class="string">'gulp-livereload'</span>),</div><div class="line">    del = <span class="built_in">require</span>(<span class="string">'del'</span>);</div></pre></td></tr></table></figure>

<p>Gulpçš„æ’ä»¶å’ŒGruntæœ‰äº›è®¸ä¸ä¸€æ ·ï¼ŒGruntæ’ä»¶æ˜¯ä¸ºäº†æ›´å¥½çš„å®Œæˆä¸€é¡¹ä»»åŠ¡ã€‚å°±åƒGruntçš„<code>imagemin</code>æ’ä»¶å°±åˆ©ç”¨äº†ç¼“å­˜æ¥é¿å…é‡å¤å‹ç¼©ï¼Œè€ŒGulpè¦åˆ©ç”¨<code>gulp-cache</code>æ¥å®Œæˆï¼Œå½“ç„¶å•¦ï¼Œä¸ä»…é™å®šäºç¼“å­˜å›¾ç‰‡ã€‚</p>
<h2 id="å»ºç«‹ä»»åŠ¡">å»ºç«‹ä»»åŠ¡</h2>
<h3 id="ç¼–è¯‘sassã€è‡ªåŠ¨æ·»åŠ csså‰ç¼€å’Œå‹ç¼©">ç¼–è¯‘sassã€è‡ªåŠ¨æ·»åŠ csså‰ç¼€å’Œå‹ç¼©</h3>
<p>é¦–å…ˆæˆ‘ä»¬ç¼–è¯‘sassï¼Œæ·»åŠ å‰ç¼€ï¼Œä¿å­˜åˆ°æˆ‘ä»¬æŒ‡å®šçš„ç›®å½•ä¸‹é¢ï¼Œè¿˜æ²¡ç»“æŸï¼Œæˆ‘ä»¬è¿˜è¦å‹ç¼©ï¼Œç»™æ–‡ä»¶æ·»åŠ <code>.min</code>åç¼€å†è¾“å‡ºå‹ç¼©æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ï¼Œæœ€åæé†’ä»»åŠ¡å®Œæˆäº†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'styles'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/styles/main.scss'</span>)</div><div class="line">    .pipe(sass({ style: <span class="string">'expanded'</span> }))</div><div class="line">    .pipe(autoprefixer(<span class="string">'last 2 version'</span>, <span class="string">'safari 5'</span>, <span class="string">'ie 8'</span>, <span class="string">'ie 9'</span>, <span class="string">'opera 12.1'</span>, <span class="string">'ios 6'</span>, <span class="string">'android 4'</span>))</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/assets/css'</span>))</div><div class="line">    .pipe(rename({suffix: <span class="string">'.min'</span>}))</div><div class="line">    .pipe(minifycss())</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/assets/css'</span>))</div><div class="line">    .pipe(notify({ message: <span class="string">'Styles task complete'</span> }));</div><div class="line">});</div></pre></td></tr></table></figure>

<p>è®©æˆ‘è§£é‡Šä¸€ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'styles'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{...});</div></pre></td></tr></table></figure>

<p><code>gulp.task</code>è¿™ä¸ªAPIç”¨æ¥åˆ›å»ºä»»åŠ¡ï¼Œåœ¨å‘½ä»¤è¡Œä¸‹å¯ä»¥è¾“å…¥<code>$ gulp styles</code>æ¥æ‰§è¡Œä¸Šé¢çš„ä»»åŠ¡ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">return</span> gulp.src(<span class="string">'src/styles/main.scss'</span>)</div></pre></td></tr></table></figure>

<p><code>gulp.src</code>è¿™ä¸ªAPIè®¾ç½®éœ€è¦å¤„ç†çš„æ–‡ä»¶çš„è·¯å¾„ï¼Œå¯ä»¥æ˜¯å¤šä¸ªæ–‡ä»¶ä»¥æ•°ç»„çš„å½¢å¼<code>[main.scss, vender.scss]</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼<code>/**/*.scss</code>ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.pipe(sass({ style: <span class="string">'expanded'</span> }))</div></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨<code>.pipe()</code>è¿™ä¸ªAPIå°†éœ€è¦å¤„ç†çš„æ–‡ä»¶å¯¼å‘sassæ’ä»¶ï¼Œé‚£äº›æ’ä»¶çš„ç”¨æ³•å¯ä»¥åœ¨githubä¸Šæ‰¾åˆ°ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶æŸ¥æ‰¾æˆ‘å·²ç»åœ¨ä¸Šé¢åˆ—å‡ºæ¥äº†ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.pipe(gulp.dest(<span class="string">'dist/assets/css'</span>));</div></pre></td></tr></table></figure>

<p><code>gulp.dest()</code>APIè®¾ç½®ç”Ÿæˆæ–‡ä»¶çš„è·¯å¾„ï¼Œä¸€ä¸ªä»»åŠ¡å¯ä»¥æœ‰å¤šä¸ªç”Ÿæˆè·¯å¾„ï¼Œä¸€ä¸ªå¯ä»¥è¾“å‡ºæœªå‹ç¼©çš„ç‰ˆæœ¬ï¼Œå¦ä¸€ä¸ªå¯ä»¥è¾“å‡ºå‹ç¼©åçš„ç‰ˆæœ¬ã€‚</p>
<p>ä¸ºäº†æ›´å¥½çš„äº†è§£Gulp APIï¼Œå¼ºçƒˆå»ºè®®çœ‹ä¸€ä¸‹<a href="//github.com/gulpjs/gulp/blob/master/docs/API.md">Gulp APIæ–‡æ¡£</a>ï¼Œå…¶å®Gulp APIå°±è¿™ä¹ˆå‡ ä¸ªï¼Œæ²¡ä»€ä¹ˆå¥½å¯æ€•çš„ã€‚</p>
<h3 id="jsä»£ç æ ¡éªŒã€åˆå¹¶å’Œå‹ç¼©">jsä»£ç æ ¡éªŒã€åˆå¹¶å’Œå‹ç¼©</h3>
<p>å¸Œæœ›å¤§å®¶å·²ç»çŸ¥é“å¦‚ä½•å»åˆ›å»ºä¸€ä¸ªä»»åŠ¡äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å®Œæˆscriptsçš„æ ¡éªŒã€åˆå¹¶å’Œå‹ç¼©çš„ä»»åŠ¡å§ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'scripts'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/scripts/**/*.js'</span>)</div><div class="line">    .pipe(jshint(<span class="string">'.jshintrc'</span>))</div><div class="line">    .pipe(jshint.reporter(<span class="string">'default'</span>))</div><div class="line">    .pipe(concat(<span class="string">'main.js'</span>))</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/assets/js'</span>))</div><div class="line">    .pipe(rename({suffix: <span class="string">'.min'</span>}))</div><div class="line">    .pipe(uglify())</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/assets/js'</span>))</div><div class="line">    .pipe(notify({ message: <span class="string">'Scripts task complete'</span> }));</div><div class="line">});</div></pre></td></tr></table></figure>

<p>éœ€è¦æé†’çš„æ˜¯æˆ‘ä»¬è¦è®¾ç½®JSHintçš„reporteræ–¹å¼ï¼Œä¸Šé¢ä½¿ç”¨çš„æ˜¯defaulté»˜è®¤çš„ï¼Œäº†è§£æ›´å¤šç‚¹å‡»<a href="//www.jshint.com/docs/reporters/">è¿™é‡Œ</a>ã€‚</p>
<h3 id="å‹ç¼©å›¾ç‰‡">å‹ç¼©å›¾ç‰‡</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'images'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/images/**/*'</span>)</div><div class="line">    .pipe(imagemin({ optimizationLevel: <span class="number">3</span>, progressive: <span class="literal">true</span>, interlaced: <span class="literal">true</span> }))</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/assets/img'</span>))</div><div class="line">    .pipe(notify({ message: <span class="string">'Images task complete'</span> }));</div><div class="line">});</div></pre></td></tr></table></figure>

<p>è¿™ä¸ªä»»åŠ¡ä½¿ç”¨<code>imagemin</code>æ’ä»¶æŠŠæ‰€æœ‰åœ¨<code>src/images/</code>ç›®å½•ä»¥åŠå…¶å­ç›®å½•ä¸‹çš„æ‰€æœ‰å›¾ç‰‡ï¼ˆæ–‡ä»¶ï¼‰è¿›è¡Œå‹ç¼©ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œåˆ©ç”¨ç¼“å­˜ä¿å­˜å·²ç»å‹ç¼©è¿‡çš„å›¾ç‰‡ï¼Œä½¿ç”¨ä¹‹å‰è£…è¿‡çš„<a href="//github.com/jgable/gulp-cache">gulp-cache</a>æ’ä»¶ï¼Œä¸è¿‡è¦ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼š</p>
<p>å°†è¿™è¡Œä»£ç :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.pipe(imagemin({ optimizationLevel: <span class="number">3</span>, progressive: <span class="literal">true</span>, interlaced: <span class="literal">true</span> }))</div></pre></td></tr></table></figure>

<p>ä¿®æ”¹æˆ:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.pipe(cache(imagemin({ optimizationLevel: <span class="number">5</span>, progressive: <span class="literal">true</span>, interlaced: <span class="literal">true</span> })))</div></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œåªæœ‰æ–°å»ºæˆ–è€…ä¿®æ”¹è¿‡çš„å›¾ç‰‡æ‰ä¼šè¢«å‹ç¼©äº†ã€‚</p>
<h3 id="æ¸…é™¤æ–‡ä»¶">æ¸…é™¤æ–‡ä»¶</h3>
<p>åœ¨ä»»åŠ¡æ‰§è¡Œå‰ï¼Œæœ€å¥½å…ˆæ¸…é™¤ä¹‹å‰ç”Ÿæˆçš„æ–‡ä»¶ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'clean'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span> </span>{</div><div class="line">    del([<span class="string">'dist/assets/css'</span>, <span class="string">'dist/assets/js'</span>, <span class="string">'dist/assets/img'</span>], cb)</div><div class="line">});</div></pre></td></tr></table></figure>

<p>åœ¨è¿™é‡Œæ²¡æœ‰å¿…è¦ä½¿ç”¨Gulpæ’ä»¶äº†ï¼Œå¯ä»¥ä½¿ç”¨NPMæä¾›çš„æ’ä»¶ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆ<code>cb</code>ï¼‰ç¡®ä¿åœ¨é€€å‡ºå‰å®Œæˆä»»åŠ¡ã€‚</p>
<h3 id="è®¾ç½®é»˜è®¤ä»»åŠ¡ï¼ˆdefaultï¼‰">è®¾ç½®é»˜è®¤ä»»åŠ¡ï¼ˆdefaultï¼‰</h3>
<p>æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸‹è¾“å…¥<code>$ gulp</code>æ‰§è¡Œçš„å°±æ˜¯é»˜è®¤ä»»åŠ¡ï¼Œç°åœ¨æˆ‘ä»¬ä¸ºé»˜è®¤ä»»åŠ¡æŒ‡å®šæ‰§è¡Œä¸Šé¢å†™å¥½çš„ä¸‰ä¸ªä»»åŠ¡ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'clean'</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    gulp.start(<span class="string">'styles'</span>, <span class="string">'scripts'</span>, <span class="string">'images'</span>);</div><div class="line">});</div></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢ï¼Œcleanä»»åŠ¡æ‰§è¡Œå®Œæˆäº†æ‰ä¼šå»è¿è¡Œå…¶ä»–çš„ä»»åŠ¡ï¼Œåœ¨<code>gulp.start()</code>é‡Œçš„ä»»åŠ¡æ‰§è¡Œçš„é¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼Œæ‰€ä»¥å°†è¦åœ¨å®ƒä»¬ä¹‹å‰æ‰§è¡Œçš„ä»»åŠ¡å†™åœ¨æ•°ç»„é‡Œé¢ã€‚</p>
<h3 id="ç›‘å¬æ–‡ä»¶">ç›‘å¬æ–‡ä»¶</h3>
<p>ä¸ºäº†ç›‘å¬æ–‡ä»¶çš„æ˜¯å¦ä¿®æ”¹ä»¥ä¾¿æ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œç„¶ååˆ©ç”¨<code>gulp.watch</code>APIå®ç°ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="comment">// Watch .scss files</span></div><div class="line">  gulp.watch(<span class="string">'src/styles/**/*.scss'</span>, [<span class="string">'styles'</span>]);</div><div class="line">  <span class="comment">// Watch .js files</span></div><div class="line">  gulp.watch(<span class="string">'src/scripts/**/*.js'</span>, [<span class="string">'scripts'</span>]);</div><div class="line">  <span class="comment">// Watch image files</span></div><div class="line">  gulp.watch(<span class="string">'src/images/**/*'</span>, [<span class="string">'images'</span>]);</div><div class="line">});</div></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å°†ä¸åŒç±»å‹çš„æ–‡ä»¶åˆ†å¼€å¤„ç†ï¼Œæ‰§è¡Œå¯¹åº”çš„æ•°ç»„é‡Œçš„ä»»åŠ¡ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œè¾“å…¥<code>$ gulp watch</code>æ‰§è¡Œç›‘å¬ä»»åŠ¡ï¼Œå½“<code>.sass</code>ã€<code>.js</code>å’Œå›¾ç‰‡ä¿®æ”¹æ—¶å°†æ‰§è¡Œå¯¹åº”çš„ä»»åŠ¡ã€‚</p>
<h3 id="è‡ªåŠ¨åˆ·æ–°é¡µé¢">è‡ªåŠ¨åˆ·æ–°é¡µé¢</h3>
<p>Gulpä¹Ÿå¯ä»¥å®ç°å½“æ–‡ä»¶ä¿®æ”¹æ—¶è‡ªåŠ¨åˆ·æ–°é¡µé¢ï¼Œæˆ‘ä»¬è¦ä¿®æ”¹<code>watch</code>ä»»åŠ¡ï¼Œé…ç½®LiveReloadï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="comment">// Create LiveReload server</span></div><div class="line">  livereload.listen();</div><div class="line">  <span class="comment">// Watch any files in dist/, reload on change</span></div><div class="line">  gulp.watch([<span class="string">'dist/**'</span>]).on(<span class="string">'change'</span>, livereload.changed);</div><div class="line">});</div></pre></td></tr></table></figure>

<p>è¦ä½¿è¿™ä¸ªèƒ½å¤Ÿå·¥ä½œï¼Œè¿˜éœ€è¦åœ¨æµè§ˆå™¨ä¸Šå®‰è£…LiveReloadæ’ä»¶ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜èƒ½<a href="//feedback.livereload.com/knowledgebase/articles/86180-how-do-i-add-the-script-tag-manually-">è¿™æ ·åš</a></p>
<h3 id="æ‰€æœ‰ä»»åŠ¡æ”¾ä¸€èµ·">æ‰€æœ‰ä»»åŠ¡æ”¾ä¸€èµ·</h3>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*!</span></div><div class="line"> * gulp</div><div class="line"> * $ npm install gulp-ruby-sass gulp-autoprefixer gulp-minify-css gulp-jshint gulp-concat gulp-uglify gulp-imagemin gulp-notify gulp-rename gulp-livereload gulp-cache del --save-dev</div><div class="line"> */</div><div class="line"><span class="comment">// Load plugins</span></div><div class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</div><div class="line">    sass = <span class="built_in">require</span>(<span class="string">'gulp-ruby-sass'</span>),</div><div class="line">    autoprefixer = <span class="built_in">require</span>(<span class="string">'gulp-autoprefixer'</span>),</div><div class="line">    minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>),</div><div class="line">    jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>),</div><div class="line">    uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),</div><div class="line">    imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>),</div><div class="line">    rename = <span class="built_in">require</span>(<span class="string">'gulp-rename'</span>),</div><div class="line">    concat = <span class="built_in">require</span>(<span class="string">'gulp-concat'</span>),</div><div class="line">    notify = <span class="built_in">require</span>(<span class="string">'gulp-notify'</span>),</div><div class="line">    cache = <span class="built_in">require</span>(<span class="string">'gulp-cache'</span>),</div><div class="line">    livereload = <span class="built_in">require</span>(<span class="string">'gulp-livereload'</span>),</div><div class="line">    del = <span class="built_in">require</span>(<span class="string">'del'</span>);</div><div class="line"><span class="comment">// Styles</span></div><div class="line">gulp.task(<span class="string">'styles'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/styles/main.scss'</span>)</div><div class="line">    .pipe(sass({ style: <span class="string">'expanded'</span>, }))</div><div class="line">    .pipe(autoprefixer(<span class="string">'last 2 version'</span>, <span class="string">'safari 5'</span>, <span class="string">'ie 8'</span>, <span class="string">'ie 9'</span>, <span class="string">'opera 12.1'</span>, <span class="string">'ios 6'</span>, <span class="string">'android 4'</span>))</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/styles'</span>))</div><div class="line">    .pipe(rename({ suffix: <span class="string">'.min'</span> }))</div><div class="line">    .pipe(minifycss())</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/styles'</span>))</div><div class="line">    .pipe(notify({ message: <span class="string">'Styles task complete'</span> }));</div><div class="line">});</div><div class="line"><span class="comment">// Scripts</span></div><div class="line">gulp.task(<span class="string">'scripts'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/scripts/**/*.js'</span>)</div><div class="line">    .pipe(jshint(<span class="string">'.jshintrc'</span>))</div><div class="line">    .pipe(jshint.reporter(<span class="string">'default'</span>))</div><div class="line">    .pipe(concat(<span class="string">'main.js'</span>))</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/scripts'</span>))</div><div class="line">    .pipe(rename({ suffix: <span class="string">'.min'</span> }))</div><div class="line">    .pipe(uglify())</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/scripts'</span>))</div><div class="line">    .pipe(notify({ message: <span class="string">'Scripts task complete'</span> }));</div><div class="line">});</div><div class="line"><span class="comment">// Images</span></div><div class="line">gulp.task(<span class="string">'images'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="keyword">return</span> gulp.src(<span class="string">'src/images/**/*'</span>)</div><div class="line">    .pipe(cache(imagemin({ optimizationLevel: <span class="number">3</span>, progressive: <span class="literal">true</span>, interlaced: <span class="literal">true</span> })))</div><div class="line">    .pipe(gulp.dest(<span class="string">'dist/images'</span>))</div><div class="line">    .pipe(notify({ message: <span class="string">'Images task complete'</span> }));</div><div class="line">});</div><div class="line"><span class="comment">// Clean</span></div><div class="line">gulp.task(<span class="string">'clean'</span>, <span class="function"><span class="keyword">function</span><span class="params">(cb)</span> </span>{</div><div class="line">    del([<span class="string">'dist/assets/css'</span>, <span class="string">'dist/assets/js'</span>, <span class="string">'dist/assets/img'</span>], cb)</div><div class="line">});</div><div class="line"><span class="comment">// Default task</span></div><div class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'clean'</span>], <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    gulp.start(<span class="string">'styles'</span>, <span class="string">'scripts'</span>, <span class="string">'images'</span>);</div><div class="line">});</div><div class="line"><span class="comment">// Watch</span></div><div class="line">gulp.task(<span class="string">'watch'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">  <span class="comment">// Watch .scss files</span></div><div class="line">  gulp.watch(<span class="string">'src/styles/**/*.scss'</span>, [<span class="string">'styles'</span>]);</div><div class="line">  <span class="comment">// Watch .js files</span></div><div class="line">  gulp.watch(<span class="string">'src/scripts/**/*.js'</span>, [<span class="string">'scripts'</span>]);</div><div class="line">  <span class="comment">// Watch image files</span></div><div class="line">  gulp.watch(<span class="string">'src/images/**/*'</span>, [<span class="string">'images'</span>]);</div><div class="line">  <span class="comment">// Create LiveReload server</span></div><div class="line">  livereload.listen();</div><div class="line">  <span class="comment">// Watch any files in dist/, reload on change</span></div><div class="line">  gulp.watch([<span class="string">'dist/**'</span>]).on(<span class="string">'change'</span>, livereload.changed);</div><div class="line">});</div></pre></td></tr></table></figure>

<p>åœ¨<a href="//gist.github.com/markgoodyear/8497946#file-gruntfile-js">gist</a>ä¸Šæœ‰æºç ï¼Œå¹¶ä¸”é™„ä¸ŠGruntçš„å®ç°ä½œä¸ºå¯¹æ¯”ã€‚</p>
<blockquote>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="http://markgoodyear.com/2014/01/getting-started-with-gulp/" target="_blank" rel="external">http://markgoodyear.com/2014/01/getting-started-with-gulp/</a></p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="å‰è¨€">å‰è¨€</h2>
<p>æœ€è¿‘æµè¡Œå‰ç«¯æ„å»ºå·¥å…·ï¼Œè‹¦äºä¹‹å‰ä½¿ç”¨Gruntï¼Œä»£ç å¾ˆéš¾é˜…è¯»ï¼Œç°åœ¨å‡ºäº†Gulpï¼ŒçœŸæ˜¯æ‘†è„±äº†ç—›è‹¦ã€‚å‘ç°äº†ä¸€ç¯‡å¾ˆå¥½çš„Gulpè‹±æ–‡æ•™ç¨‹ï¼Œæ•´ç†ç¿»è¯‘ç»™å¤§å®¶çœ‹çœ‹ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆä½¿ç”¨Gulp">ä¸ºä»€ä¹ˆä½¿ç”¨Gulp</h2>
<p>G]]>
    </summary>
    
      <category term="Javascript" scheme="http://yoursite.com/tags/Javascript/"/>
    
      <category term="Gulp" scheme="http://yoursite.com/tags/Gulp/"/>
    
      <category term="Node.js" scheme="http://yoursite.com/tags/Node-js/"/>
    
  </entry>
  
</feed>
